# ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж▓ржЬрж┐ржХржХрзЗ ржХрзНрж▓рж╛ржЙржбрзЗ рж╕рзНржерж╛ржирж╛ржирзНрждрж░

![A sketchnote overview of this lesson](../../../../sketchnotes/lesson-9.jpg)

> рж╕рзНржХрзЗржЪржирзЛржЯржЯрж┐ рждрзИрж░рзА ржХрж░рзЗржЫрзЗржи [Nitya Narasimhan](https://github.com/nitya). ржмрзЬ рж╕ржВрж╕рзНржХрж░ржгрзЗ ржжрзЗржЦрж╛рж░ ржЬржирзНржп ржЫржмрж┐ржЯрж┐рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рждрзЗ рж╣ржмрзЗред

## рж▓рзЗржХржЪрж╛рж░-ржкрзВрж░рзНржмржмрж░рзНрждрзА ржХрзБржЗржЬ

[рж▓рзЗржХржЪрж╛рж░-ржкрзВрж░рзНржмржмрж░рзНрждрзА ржХрзБржЗржЬ](https://brave-island-0b7c7f50f.azurestaticapps.net/quiz/17)

## рж╕рзВржЪржирж╛

ржЧржд ржкрж╛ржарзЗ ржЖржорж░рж╛ рж╢рж┐ржЦрзЗржЫрж┐ ржХрзАржнрж╛ржмрзЗ ржХрзНрж▓рж╛ржЙржб-ржнрж┐рждрзНрждрж┐ржХ ржЖржЗржУржЯрж┐ ржкрж░рж┐рж╖рзЗржмрж╛рждрзЗ ржЖржорж╛ржжрзЗрж░ ржЙржжрзНржнрж┐ржжржХрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ ржкрж░рзНржпржмрзЗржХрзНрж╖ржг ржПржмржВ рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржПрж░ ржорждрзЛ ржХрж╛ржЬржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ ржХрзНрж▓рж╛ржЙржб ржерзЗржХрзЗ ржХрж░рж╛ ржпрж╛рзЯред  ржПржЦржи ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржкржЯрж┐ рж╣рж▓ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзЛржбржХрзЗ ржХрзНрж▓рж╛ржЙржбрзЗ рж╕рзНржерж╛ржирж╛ржирзНрждрж░ ржХрж░рж╛ ржпрж╛ рж░рж┐рж▓рзЗ ржПрж░ ржЯрж╛ржЗржорж┐ржВ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗред ржПржЗ ржкрж╛ржарзЗ ржЖржорж░рж╛ рж╕рж╛рж░рзНржнрж╛рж░ржмрж┐рж╣рзАржи (serverless) ржлрж╛ржВрж╢ржи ржжрзНржмрж╛рж░рж╛ ржПржЗ ржХрж╛ржЬржЯрж┐ ржХрж░рждрзЗ рж╢рж┐ржЦржмред

ржПржЗ рж▓рзЗрж╕ржирзЗ рж░рзЯрзЗржЫрзЗржГ

* [рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржмрж▓рждрзЗ ржХрзА ржмрзЛржЭрж╛рзЯ?](#рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕-ржмрж▓рждрзЗ-ржХрзА-ржмрзЛржЭрж╛рзЯ)
* [ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рждрзИрж░рж┐](#ржПржХржЯрж┐-рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕-ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи-рждрзИрж░рж┐-ржХрж░рж╛)
* [ржПржХржЯрж┐ IoT Hub ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рж┐](#ржПржХржЯрж┐-ржЖржЗржУржЯрж┐-рж╣рж╛ржм-ржЗржнрзЗржирзНржЯ-ржЯрзНрж░рж┐ржЧрж╛рж░-рждрзИрж░рж┐-ржХрж░рж╛)
* [рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХрзЛржб ржерзЗржХрзЗ ржбрж┐рж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ](#рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕-ржХрзЛржб-ржерзЗржХрзЗ-ржбрж┐рж░рзЗржХрзНржЯ-ржорзЗржержб-рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ-ржкрж╛ржарж╛ржирзЛ)
* [ржХрзНрж▓рж╛ржЙржбрзЗ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХрзЛржб ржбрзЗржкрзНрж▓рзЯ ржХрж░рж╛](#ржХрзНрж▓рж╛ржЙржбрзЗ-рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕-ржХрзЛржб-ржбрзЗржкрзНрж▓рзЯ-ржХрж░рж╛)

## рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржмрж▓рждрзЗ ржХрзА ржмрзЛржЭрж╛рзЯ?

рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржмрж╛ рж╕рж╛рж░рзНржнрж╛рж░ржмрж┐рж╣рзАржи ржХржорзНржкрж┐ржЙржЯрж┐ржВ ржмрж▓рждрзЗ ржмрзЛржЭрж╛ржирзЛ рж╣рзЯ ржмрж┐ржнрж┐ржирзНржи ржзрж░ржгрзЗрж░ ржЗржнрзЗржирзНржЯрзЗрж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ рж╣рж┐рж╕рж╛ржмрзЗ ржХрзНрж▓рж╛ржЙржбрзЗ ржЪрж╛рж▓рж┐ржд ржХрзЛржбрзЗрж░ ржЫрзЛржЯ ржЫрзЛржЯ ржмрзНрж▓ржХ ред ржЗржнрзЗржирзНржЯ ржШржЯрж▓рзЗ ржХрзЛржб ржЪрж╛рж▓рж┐ржд рж╣ржпрж╝ ржПржмржВ ржПржЯрж┐ ржЗржнрзЗржирзНржЯ рж╕ржорзНржкрж░рзНржХрж┐ржд ржбрзЗржЯрж╛ ржкрж╛рж╕ ржХрж░рзЗред ржПржЗ ржЗржнрзЗржирзНржЯржЧрзБрж▓рж┐ ржмрж┐ржнрж┐ржирзНржи  ржмрж┐рж╖рзЯ рж╕ржорзНржкрж░рзНржХрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗ ржпрзЗржоржи, ржУржпрж╝рзЗржм рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ, рж╕рж╛рж░рж┐рждрзЗ ржЕржкрзЗржХрзНрж╖рж╛рж░ржд ржмрж╛рж░рзНрждрж╛рж╕ржорзВрж╣, ржПржХржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржбрзЗржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ ржмрж╛ ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рж┐рж░ ржорж╛ржзрзНржпржорзЗ ржЖржЗржУржЯрж┐ ржкрж░рж┐рж╖рзЗржмрж╛рждрзЗ ржмрж╛рж░рзНрждрж╛ ржкрзНрж░рзЗрж░ржг ржЗрждрзНржпрж╛ржжрж┐ред

![Events being sent from an IoT service to a serverless service, all being processed at the same time by multiple functions being run](../../../../images/iot-messages-to-serverless.png)

> ЁЯТБ ржпржжрж┐ ржЖржЧрзЗ 'ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЯрзНрж░рж┐ржЧрж╛рж░' ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЕржнрж┐ржЬрзНржЮрждрж╛ ржерж╛ржХрзЗ, рждржмрзЗ ржПржЯрж╛ржХрзЗржУ ржПржХржЗ ржЬрж┐ржирж┐рж╕ рж╣рж┐рж╕рж╛ржмрзЗ ржнрж╛ржмрж╛ ржпрж╛рзЯ ржпрж╛ ржХрзЛржи ржЗржнрзЗржирзНржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржХрзЛржб ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ, ржпрзЗржоржи ржПржХржЯрж┐ рж╕рж╛рж░рж┐ ржмрж╛ row ржпрзЛржЧ ржХрж░рж╛ ред

![When many events are sent at the same time, the serverless service scales up to run them all at the same time](../../../../images/serverless-scaling.png)

ржЖржорж╛ржжрзЗрж░ ржХрзЛржбржЯрж┐ ржХрзЗржмрж▓ рждржЦржиржЗ рж░рж╛ржи рж╣ржпрж╝, ржпржЦржи ржЗржнрзЗржирзНржЯржЯрж┐ ржШржЯрзЗ ; ржЕржирзНржп  рж╕ржорзЯ ржХрзЛржб рж╕ржХрзНрж░рж┐рзЯ ржерж╛ржХрзЗржирж╛ред ржЗржнрзЗржирзНржЯржЯрж┐ ржШржЯрж╛ржорж╛рждрзНрж░ ржХрзЛржбржЯрж┐ рж▓рзЛржб рж╣ржпрж╝ ржПржмржВ рждрж╛ ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯред ржПржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ржХрзЗ ржЦрзБржм рж╕рзНржХрзЗрж▓рзЗржмрж▓ (scalable) ржХрж░рзЗ рждрзЛрж▓рзЗ - ржпржжрж┐ ржПржХржЗ рж╕рж╛ржерзЗ ржЕржирзЗржХржЧрзБрж▓рж┐ ржЗржнрзЗржирзНржЯ ржШржЯрзЗ, рждржмрзЗ ржХрзНрж▓рж╛ржЙржб рж╕рж░ржмрж░рж╛рж╣ржХрж╛рж░рзА ржпрждржмрж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи рждрждржмрж╛рж░ ржХрзЛржб ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗред рждржмрзЗ ржПржЯрж┐рж░ ржЕржирзЗржХ рж╕рзБржмрж┐ржзрж╛ ржерж╛ржХрж▓рзЗржУ, ржПрж░ ржирзЗрждрж┐ржмрж╛ржЪржХ ржжрж┐ржХржЯрж┐ рж╣рж▓ ржпржжрж┐ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЗржнрзЗржирзНржЯржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ рждржерзНржп ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржирзЗрж░ ржжрж░ржХрж╛рж░ рж╣ржпрж╝, рждржмрзЗ ржПржЯрж┐ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗрж░ ржорждрзЛ ржХрзЛржерж╛ржУ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ рж╣ржмрзЗред

ржЖржорж╛ржжрзЗрж░ ржХрзЛржб ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ рж╣рж┐рж╕рж╛ржмрзЗ ржЗржнрзЗржирзНржЯржЯрж┐рж░ рждржерзНржп ржЧрзНрж░рж╣ржг ржХрж░рзЗред ржПржЗ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐ рж▓рж┐ржЦрждрзЗ ржЖржорж░рж╛ ржЕржирзЗржХржЧрзБрж▓рзЛ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ ржнрж╛рж╖рж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

> ЁЯОУ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ржХрзЗ ржЕржирзЗржХрж╕ржорзЯ Functions as a service (FaaS) рж╣рж┐рж╕рж╛ржмрзЗржУ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ рж╣ржпрж╝ ржХрж╛рж░ржг ржкрзНрж░рждрж┐ржЯрж┐ ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ржХрзЗ ржХрзЛржб ржП ржлрж╛ржВрж╢ржи рж╣рж┐рж╕рж╛ржмрзЗ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝ред

ржирж╛ржо "рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕" рж╣рж▓рзЗржУ, ржПржЯрж┐ ржЖрж╕рж▓рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржирж╛ржоржХрж░ржгржЯрж┐ ржПржоржи рж╣ржУрзЯрж╛рж░ ржкрж┐ржЫржирзЗ ржХрж╛рж░ржг рж╣рж▓ ржЖржорж░рж╛ ржбрзЗржнрж▓рж╛ржкрж╛рж░ рж╣рж┐рж╕рж╛ржмрзЗ ржХрзЛржб ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп рж╕рж╛рж░рзНржнрж╛рж░ ржмрж┐рж╖ржпрж╝рзЗ ржХрзЛржи ржЪрж┐ржирзНрждрж╛ржЗ ржХрж░рж┐ ржирж╛, ржЖржорж╛ржжрзЗрж░ рж╕ржХрж▓ ржоржирзЛржпрзЛржЧ ржерж╛ржХрзЗ ржХрзЛржи ржЗржнрзЗржирзНржЯрзЗрж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛рждрзЗ ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж╛ржирзЛ рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛ рж╕рзЗ ржмрж┐рж╖рзЯрзЗред ржХрзНрж▓рж╛ржЙржб рж╕рж░ржмрж░рж╛рж╣ржХрж╛рж░рзАрж░ ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ *рж░рж╛ржиржЯрж╛ржЗржо* рж░ржпрж╝рзЗржЫрзЗ ржпрж╛ рж╕рж╛рж░рзНржнрж╛рж░, ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрж┐ржВ, рж╕рзНржЯрзЛрж░рзЗржЬ, рж╕рж┐ржкрж┐ржЗржЙ, ржорзЗржорж░рж┐ ржПржмржВ ржХрзЛржб ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рж╕ржорж╕рзНржд ржХрж┐ржЫрзБрж░ ржмрзНржпржмрж╕рзНржерж╛ ржХрж░рзЗред ржПржЗ ржоржбрзЗрж▓ржЯрж┐рждрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржирзЗржЗ ржмрж▓рзЗ, ржЖржорж░рж╛ ржПржЗ рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ ржЬржирзНржп рж╕рж╛рж░рзНржнрж╛рж░ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛рж░ ржЕрж░рзНрже ржкрзНрж░ржжрж╛ржи ржХрж░рждрзЗ ржкрж╛рж░ржм ржирж╛ред ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржмрж░ржВ ржХрзЛржбржЯрж┐рж░ ржЪрж▓ржорж╛ржи рж╕ржоржпрж╝ ржПржмржВ ржорзЗржорж░рж┐рж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржкрж░рж┐ржорж╛ржгрзЗрж░ ржЙржкрж░ ржЕрж░рзНрже ржкрзНрж░ржжрж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗред

> ЁЯТ░  ржХрзНрж▓рж╛ржЙржбрзЗ ржХрзЛржб ржХржо ржЦрж░ржЪрзЗ рж░рж╛ржи ржХрж░рж╛рж░ рж╕ржмржЪрзЗрзЯрзЗ ржнрж╛рж▓рзЛ ржЙржкрж╛ржпрж╝ рж╣рж▓рзЛ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, (ржПржЗ рж▓рзЗрж╕ржи рж▓рзЗржЦрж╛рж░ рж╕ржоржпрж╝) ржпрзЗржХрзЛржи ржХрзНрж▓рж╛ржЙржб рж╕рж░ржмрж░рж╛рж╣ржХрж╛рж░рзА ржПржЗ ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐рждрзЗ ржЪрж╛рж░рзНржЬ рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржЖржЧрзЗ ржПржХржорж╛рж╕рзЗ 1000,000 ржмрж╛рж░ рж░рж╛ржи ржХрж░рж╛рж░ рж╕рзБржпрзЛржЧ ржжрзЗрзЯ ржПржмржВ рждрж╛рж░ржкрж░рзЗ рждрж╛рж░рж╛ ржкрзНрж░рждрж┐ржЯрж┐ 1,000,000 ржмрж╛рж░ ржХрзЛржб ржПржХрзНрж╕рзЗржХрж┐ржЙржЯ ржХрж░рж╛рж░ ржЬржирзНржп $0.20 ржЪрж╛рж░рзНржЬ ржХрж░рзЗред ржпржЦржи ржХрзЛржб ржЪрж▓ржЫрзЗ ржирж╛, рждржЦржи ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЕрж░рзНрже ржкрзНрж░ржжрж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗржирж╛ред

ржЖржЗржУржЯрж┐ ржбрзЗржнрж▓рж╛ржкрж╛рж░ рж╣рж┐рж╕рж╛ржмрзЗ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржоржбрзЗрж▓ржЯрж┐ рж╕рж░рзНржмрзЛрждрзНрждржоред ржПржЦрж╛ржирзЗ ржЪрж╛ржЗрж▓рзЗ ржЖржорж░рж╛ ржПржоржи ржлрж╛ржВрж╢ржи рж▓рж┐ржЦрждрзЗ ржкрж╛рж░рж┐ ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржХрзНрж▓рж╛ржЙржб-рж╣рзЛрж╕рзНржЯрзЗржб ржЖржЗржУржЯрж┐ ржкрж░рж┐рж╖рзЗржмрж╛рждрзЗ рж╕ржВржпрзБржХрзНржд ржпрзЗржХрзЛржи ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ ржерзЗржХрзЗ ржкрзНрж░рзЗрж░рж┐ржд ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐рж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржерж╛ржХржмрзЗред ржЖржорж╛ржжрзЗрж░ ржХрзЛржб ржПржЗрж╕ржм ржкрзНрж░рзЗрж░рж┐ржд ржорзНржпрж╛рж╕рзЗржЬржЧрзБрж▓рзЛржХрзЗ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░ржмрзЗ, рждржмрзЗ ржкрзНрж░ржпрж╝рзЛржЬржи ржмрзНржпрж╛рждрзАржд рж░рж╛ржи ржХрж░ржмрзЗржирж╛ред

тЬЕ ржПржоржХрж┐ржЙржЯрж┐ржЯрж┐-рждрзЗ ржмрж╛рж░рзНрждрж╛ ржЧрзНрж░рж╣ржгрзЗрж░ ржЬржирзНржп ржпрзЗ ржХрзЛржбржЯрж┐ржХрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзЛржб рж╣рж┐рж╕рж╛ржмрзЗ рж▓рж┐ржЦрзЗржЫрж┐, рж╕рзЗржЯрж┐рж░ ржжрж┐ржХрзЗ ржЖрж░рзЗржХржмрж╛рж░ рж▓ржХрзНрж╖рзНржп ржХрж░рж╛ ржпрж╛ржХ! ржХрзАржнрж╛ржмрзЗ ржПржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржХрзНрж▓рж╛ржЙржбрзЗ ржЪрж▓рждрзЗ ржкрж╛рж░рзЗ? ржХрзАржнрж╛ржмрзЗ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ, ржПржЗ ржХрзЛржбржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХржорзНржкрж┐ржЙржЯрж┐ржВ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рждрзЗ ржкрж╛рж░рзЗ?

> ЁЯТБ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржоржбрзЗрж▓ ржХрзЛржб рж░рж╛ржи ржХрж░рж╛рж░ ржкрж╛рж╢ржкрж╛рж╢рж┐ ржХрж┐ржЫрзБ ржмрж┐рж╖рзЯрзЗ ржЕржирзНржпрж╛ржирзНржп ржХрзНрж▓рж╛ржЙржб ржкрж░рж┐рж╖рзЗржмрж╛рж░ ржжрж┐ржХрзЗ ржпрж╛ржЪрзНржЫрзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, рж╕рж╛рж░рзНржнрж╛рж░рж╣рзАржи ржбрж╛ржЯрж╛ржмрзЗрж╕ржЧрзБрж▓рж┐ ржХрзНрж▓рж╛ржЙржбрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛ржЪрзНржЫрзЗ ржпрзЗржЦрж╛ржирзЗ ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржкрж╛ржарж╛ржирзЛ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯрзЗрж░ рж╕ржВржЦрзНржпрж╛ ржЕржирзБрж╕рж╛рж░рзЗ ржлрзА ржкрзНрж░ржжрж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ, ржпрзЗржоржи ржПржХржЯрж┐  query ржмрж╛ row ржпрзБржХрзНржд ржХрж░рж╛, рждржмрзЗ рж╕рж╛ржзрж╛рж░ржгржд ржХрждржЯрж╛ ржХрж╛ржЬ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ рждрж╛рж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржорзВрж▓рзНржп ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ рж╣рзЯред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржкрзНрж░рж╛ржЗржорж╛рж░рж┐ ржХрзА  ржПрж░ ржнрж┐рждрзНрждрж┐рждрзЗ ржПржХржЯрж┐ рж╕рж╛рж░рж┐ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ рж╣рж▓рзЗ, рждрж╛рж░ ржЦрж░ржЪ ржЕржирзЗржХ ржХржо рж╣ржмрзЗ - ржЕржирзЗржХржЧрзБрж▓рзЛ ржЯрзЗржмрж▓ ржпрзЛржЧ ржХрж░рзЗ ржПржХржЯрж┐ ржЬржЯрж┐рж▓ ржХрж╛ржЬ ржХрж░рж╛рж░ рждрзБрж▓ржирж╛рзЯред

## ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рждрзИрж░рж┐ ржХрж░рж╛

ржорж╛ржЗржХрзНрж░рзЛрж╕ржлржЯрзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржХрзЗ ржмрж▓рж╛ рж╣рзЯ Azure Function ред

![The Azure Functions logo](../../../../images/azure-functions-logo.png)

ржирзАржЪрзЗрж░ рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржнрж┐ржбрж┐ржУржЯрж┐рждрзЗ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐рж░ ржПржХржЯрж┐ ржУржнрж╛рж░ржнрж┐ржЙ рж░ржпрж╝рзЗржЫрзЗ

[![Azure Functions overview video](https://img.youtube.com/vi/8-jz5f_JyEQ/0.jpg)](https://www.youtube.com/watch?v=8-jz5f_JyEQ)

> ЁЯОе ржнрж┐ржбрж┐ржУ ржжрзЗржЦрждрзЗ ржЙржкрж░рзЗрж░ ржЫржмрж┐рждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рждрзЗ рж╣ржмрзЗ

тЬЕ ржПржЗ ржкрж░рзНржпрж╛рзЯрзЗ ржПржХржЯрзБ рж╕ржорзЯ ржирж┐рзЯрзЗ ржХрж┐ржЫрзБ ржкрзЬрж╛рж╢рзЛржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред ржЖрж░ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи ржПрж░ ржмрзНржпржкрж╛рж░рзЗ ржЬрж╛ржирждрзЗ рж╣рж▓рзЗ [Microsoft Azure Functions documentation](https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=academic-17441-jabenn) ржкрзЬрж╛ ржПржХржЯрж┐ ржнрж╛рж▓рзЛ ржЙржкрж╛рзЯред

ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи рж▓рж┐ржЦрждрзЗ рж╣рж▓рзЗ, ржЖржорж╛ржжрзЗрж░ ржкржЫржирзНржжржорждрзЛ ржХрзЛржи рж▓рзНржпрж╛ржВржЧрзБрзЯрзЗржЬрзЗ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи ржПржк ржП ржХрж╛ржЬ ржХрж░рж╛ рж╢рзБрж░рзБ ржХрж░рждрзЗ рж╣ржмрзЗред  Python, JavaScript, TypeScript, C#, F#, Java, ржПржмржВ Powershell ржЦрзБржмрж╕рж╣ржЬрзЗржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯред ржПржЗ ржЕржзрзНржпрж╛рзЯрзЗ ржЖржорж░рж╛ ржкрж╛ржЗржержи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи ржПржк рж▓рзЗржЦрж╛ рж╢рж┐ржЦржмрзЛред

> ЁЯТБ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи ржЖржмрж╛рж░ ржХрж╛рж╕рзНржЯржо рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ржУ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗ, рждрж╛ржЗ ржпрзЗржХрзЛржи ржнрж╛рж╖рж╛рзЯ ржПржоржиржХрж┐ COBOLржПрж░ ржорждрзЛ ржкрзБрж░ржирзЛ рж▓рзНржпрж╛ржЩрзНржЧрзБрзЯрзЗржЬрзЗржУ рждрж╛ рж▓рзЗржЦрж╛ ржпрж╛рзЯ, ржпржжрж┐ HTTP рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗред 

ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЧрзБрж▓рж┐рждрзЗ ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ *ржЯрзНрж░рж┐ржЧрж╛рж░* ржерж╛ржХрзЗ - ржПржоржи ржХрзНрж░рж┐ржпрж╝рж╛ржХрж▓рж╛ржк ржпрж╛ ржЗржнрзЗржирзНржЯржЧрзБрж▓рж┐рждрзЗ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржЬрж╛ржирж╛ржпрж╝ред ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржоржзрзНржпрзЗ ржПржХрж╛ржзрж┐ржХ ржЯрзНрж░рж┐ржЧрж╛рж░ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ, рж╕рж╛ржзрж╛рж░ржг ржПржХржЯрж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржирж┐рзЯрзЗржЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐рж░ ржЬржирзНржп ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓рзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕ржВржпрзЛржЧрзЗрж░ рж╕ржХрж▓ рждржерзНржп ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ ржПржмржВ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐рзНрж░ рж╕ржорж╕рзНржд ржлрж╛ржВрж╢ржи ржПржЯрж┐ рж╕ржВржпрзЛржЧ ржХрж░рждрзЗ ржПржмржВ ржЗржнрзЗржирзНржЯржЧрзБрж▓рж┐рж░ рждржерзНржп ржЧрзНрж░рж╣ржгрзЗ ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗ

### ржХрж╛ржЬ - Azure Functions tooling ржЗржирзНрж╕ржЯрж▓ ржХрж░рж╛

ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐рж░ ржПржХржЯрж┐ ржжрзБрж░рзНржжрж╛ржирзНржд ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рж╣рж▓ ржПржЧрзБрж▓рж┐ ржЖржорж░рж╛ рж▓рзЛржХрж╛рж▓рж┐ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рж┐ред ржХрзНрж▓рж╛ржЙржбрзЗрж░ рж╕ржорж╛ржи рж░рж╛ржиржЯрж╛ржЗржорзЗ ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ ржЪрж╛рж▓рж╛ржирзЛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржпрж╛ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЖржЗржУржЯрж┐ ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐рж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржЬрж╛ржирж╛ржпрж╝ ржПржмржВ рж▓рзЛржХрж╛рж▓рж┐ ржЪрж▓рждрзЗ ржкрж╛рж░рзЗ ржПржоржи ржХрзЛржб рж▓рзЗржЦрж╛рж░ рж╕рзБржпрзЛржЧ ржжрзЗржпрж╝ред ржПржоржиржХрж┐ ржЗржнрзЗржирзНржЯржЧрзБрж▓рж┐ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ рж╣ржУржпрж╝рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЖржорж░рж╛ ржирж┐ржЬрзЗрж░ ржХрзЛржбржЯрж┐ ржбрж┐ржмрж╛ржЧ ржХрж░рждрзЗ ржкрж╛рж░ржмред ржПржХржмрж╛рж░ ржХрзЛржб ржирж┐ржпрж╝рзЗ рж╕ржирзНрждрзБрж╖рзНржЯ рж╣рж▓рзЗржЗ, ржПржЯрж┐ ржЖржорж░рж╛ ржХрзНрж▓рж╛ржЙржбрзЗ рж╕рзНржерж╛ржкржи ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

Azure Functions tooling ржЖржорж░рж╛ CLI ржПрж░ ржорж╛ржзрзНржпржорзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржпрж╛ржХрзЗ Azure Functions Core Tools ржУ ржмрж▓рж╛ рж╣рзЯред

1. Azure Functions Core Tools ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛рж░ ржЬржирзНржп [Azure Functions Core Tools documentation](https://docs.microsoft.com/azure/azure-functions/functions-run-local?WT.mc_id=academic-17441-jabenn) ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рзА ржЕржирзБрж╕рж░ржг ржХрж░рж┐ред

1. VS Code ржП Azure Functions extension ржЗржирзНрж╕ржЯрж▓  ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЗ ржПржХрзНрж╕ржЯрзЗржирж╢ржирзЗ ржорж╛ржзрзНржпржорзЗ Azure functions рждрзИрж░рзА, ржбрж┐ржмрж╛ржЧ ржПржмржВ ржбрзЗржкрзНрж▓рзЯ ржХрж░рж╛ ржпрж╛ржмрзЗред ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ [Azure Functions extension documentation](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-azuretools.vscode-azurefunctions) ржП рж░рзЯрзЗржЫрзЗред

ржЖржорж░рж╛ ржпржЦржи ржХрзНрж▓рж╛ржЙржбрзЗ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╢рзБрж░рзБ ржХрж░ржмрзЛ, рждржЦржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржлрж╛ржЗрж▓ ржПржмржВ рж▓ржЧ ржлрж╛ржЗрж▓рзЗрж░ ржорждрзЛ ржЬрж┐ржирж┐рж╕ржЧрзБрж▓рж┐ рж╕рзЗржн рж░рж╛ржЦрждрзЗ ржЦрзБржм ржЕрж▓рзНржк ржкрж░рж┐ржорж╛ржгрзЗ ржХрзНрж▓рж╛ржЙржб рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржжрж░ржХрж╛рж░ред ржпржЦржи рж▓рзЛржХрж╛рж▓рж┐ ржЖржорж░рж╛ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЪрж╛рж▓рж╛ржЗ рждржЦржи ржЖржорж╛ржжрзЗрж░ржХрзЗ ржХрзНрж▓рж╛ржЙржб рж╕рзНржЯрзЛрж░рзЗржЬрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рждрзЗ рж╣ржмрзЗ, рждржмрзЗ ржкрзНрж░ржХрзГржд ржХрзНрж▓рж╛ржЙржбрзЗрж░ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ  ржПржХржЯрж┐ рж╕рзНржЯрзЛрж░рзЗржЬ ржПржорзБрж▓рзЗржЯрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗ ржпрзЗржоржи [Azurite](https://github.com/Azure/Azurite)ред ржПржЯрж┐ рж▓рзЛржХрж╛рж▓ ржнрж╛ржмрзЗ ржЪрж▓рзЗ, рждржмрзЗ ржХрзНрж▓рж╛ржЙржб рж╕рзНржЯрзЛрж░рзЗржЬрзЗрж░ ржорждрзЛ ржХрж╛ржЬ ржХрж░рзЗред

> ЁЯОУ ржЕрзНржпрж╛ржЬрзБрж░рзЗ, ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐ ржпрзЗ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рждрж╛ ржПржХржЯрж┐ ржЕрзНржпрж╛ржЬрзБрж░ рж╕рзНржЯрзЛрж░рзЗржЬ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯред ржПржЗ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯржЧрзБрж▓рж┐ ржлрж╛ржЗрж▓, ржмрзНрж▓ржмрж╕, ржЯрзЗржмрж┐рж▓ржЧрзБрж▓рж┐рждрзЗ ржбрзЗржЯрж╛ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЦрж╛ржирзЗ ржЪрж╛ржЗрж▓рзЗржЗ ржЕржирзЗржХржЧрзБрж▓рж┐ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ рж╕рзНржЯрзЛрж░рзЗржЬ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржнрж╛ржЧ ржХрж░рж╛ ржпрж╛рзЯ ржпрзЗржоржи ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржк ржПржмржВ ржПржХржЯрж┐ ржУржпрж╝рзЗржм ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗ ржПржХржЗ рж╕рзНржЯрзЛрж░рзЗржЬ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ред

1. Azurite рж╣рж▓рзЛ ржПржХржЯрж┐ Node.js ржПржкред рждрж╛ржЗ ржПржЯрж┐рж░  ржЬржирзНржп ржЖржЧрзЗ Node.js ржЗржирзНрж╕ржЯрж▓ ржХрж░рждрзЗ рж╣ржмрзЗ [Node.js website](https://nodejs.org/)ржП рж╕ржХрж▓ ржирж┐рж░рзНржжрзЗрж╢ржирж╛ ржЖржЫрзЗред ржорзНржпрж╛ржХ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ [Homebrew](https://formulae.brew.sh/formula/node) ржерзЗржХрзЗржУ ржЗржирзНрж╕ржЯрж▓ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗред

1. ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Azurite ржЗржирзНрж╕ржЯрж▓ ржХрж░рж┐ :

    ```sh
    npm install -g azurite
    ```

1.  `azurite` ржирж╛ржорзЗ ржлрзЛрж▓рзНржбрж╛рж░ ржЦрзБрж▓рж┐, ржПржЯрж┐рж░ ржбрзЗржЯрж╛ рж╕рзНржЯрзЛрж░ ржХрж░рж╛рж░ ржЬржирзНржп

    ```sh
    mkdir azurite
    ```

1. Azurite рж░рж╛ржи ржХрж░рж┐ -

    ```sh
    azurite --location azurite
    ```

    Azurite рж╕рзНржЯрзЛрж░рзЗржЬ ржЗржорзНржпрзБрж▓рзЗржЯрж░ launch рж╣рзЯрзЗ рж▓рзЛржХрж╛рж▓ ржлрж╛ржВрж╢ржи  рж░рж╛ржиржЯрж╛ржЗржорзЗрж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░ржмрзЗ

    ```output
    тЮЬ  ~ azurite --location azurite  
    Azurite Blob service is starting at http://127.0.0.1:10000
    Azurite Blob service is successfully listening at http://127.0.0.1:10000
    Azurite Queue service is starting at http://127.0.0.1:10001
    Azurite Queue service is successfully listening at http://127.0.0.1:10001
    Azurite Table service is starting at http://127.0.0.1:10002
    Azurite Table service is successfully listening at http://127.0.0.1:10002
    ```

### ржХрж╛ржЬ - ржПржХржЯрж┐ ржЕрзНржпрж╛ржЬрзБрж░ ржлрж╛ржВрж╢ржи ржкрзНрж░ржЬрзЗржХрзНржЯ рждрзИрж░рж┐

Azure Functions CLI ржжрзНржмрж╛рж░рж╛ ржирждрзБржи Functions app рждрзИрж░рзА ржХрж░рж╛ ржпрж╛ржмрзЗ

1. ржлрж╛ржВрж╢ржи ржПржк ржПрж░ ржЬржирзНржп ржлрзЛрж▓рзНржбрж╛рж░ ржЦрзБрж▓рзЗ рж╕рзЗржЦрж╛ржирзЗ ржпрж╛ржЗ, ржирж╛ржо ржжрж┐ржЗ `soil-moisture-trigger`

    ```sh
    mkdir soil-moisture-trigger
    cd soil-moisture-trigger
    ```

1. ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржкрж╛ржЗржержи ржнрж╛рж░рзНржЪрзБрзЯрж╛рж▓ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ рждрзИрж░рзА ржХрж░рж┐

    ```sh
    python3 -m venv .venv
    ```

1. ржнрж╛рж░рзНржЪрзБрзЯрж╛рж▓ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржПржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рж┐

    * ржЙржЗржирзНржбрзЛржЬрзЗ:

        ```cmd
        .venv\Scripts\activate.bat
        ```

    * macOS ржмрж╛ Linux ржП:

        ```cmd
        source ./.venv/bin/activate
        ```

1. ржПржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ  Functions app рждрзИрж░рзАрж░ ржЬржирзНржп ржирж┐ржорзНржирзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рж┐:

    ```sh
    func init --worker-runtime python soil-moisture-trigger
    ```

   ржПржЯрж┐ ржмрж░рзНрждржорж╛ржи ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржнрж┐рждрж░рзЗ рждрж┐ржиржЯрж┐ ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░ржмрзЗ:

    * `host.json` - ржПржЗ JSON ржбржХрзБржорзЗржирзНржЯрзЗ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржЬржирзНржп рж╕рзЗржЯрж┐ржВрж╕ рж░ржпрж╝рзЗржЫрзЗред ржПржЗ рж╕рзЗржЯрж┐ржВрж╕ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣ржмрзЗ ржирж╛ред
    * `local.settings.json` - ржПржЗ JSON ржбржХрзБржорзЗржирзНржЯрзЗ рж▓рзЛржХрж╛рж▓рж┐ ржЪрж▓рж╛ржХрж╛рж▓рзАржи ржЖржорж╛ржжрзЗрж░ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржпрзЗ рж╕рзЗржЯрж┐ржВрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗ рж╕рзЗржЧрзБрж▓рж┐ ржЖржЫрзЗ, ржпрзЗржоржи ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ ржЬржирзНржп рж╕ржВржпрзЛржЧ рж╕рзНржЯрзНрж░рж┐ржВ ред ржПржЗ рж╕рзЗржЯрж┐ржВрж╕ржЯрж┐ ржХрзЗржмрж▓ рж▓рзЛржХрж╛рж▓, ржПржмржВ рж╕рзЛрж░рзНрж╕ ржХрзЛржб ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗ ржпрзБржХрзНржд ржХрж░рж╛ ржЙржЪрж┐ржд ржирзЯред ржЖржорж░рж╛ ржпржЦржи ржХрзНрж▓рж╛ржЙржбрзЗ ржЕрзНржпрж╛ржк рж╕рзНржерж╛ржкржи ржХрж░ржм рждржЦржи ржПржЗ рж╕рзЗржЯрж┐ржВрж╕ржЯрж┐ рж╕рзНржерж╛ржкржи ржХрж░рж╛ рж╣ржмрзЗ ржирж╛, ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржЖржорж╛ржжрзЗрж░ рж╕рзЗржЯрж┐ржВрж╕ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЯрж┐ржВрж╕ ржерзЗржХрзЗ рж▓рзЛржб рж╣ржмрзЗред ржПржЗ ржкрж╛ржарзЗрж░ ржкрж░ржмрж░рзНрждрзА ржЕржВрж╢рзЗ ржмрж┐рж╖рзЯржЯрж┐ ржЖрж▓рзЛржЪржирж╛ ржХрж░рж╛ рж╣ржмрзЗред
    * `requirements.txt` - ржПржЯрж┐  ржПржХржЯрж┐ [Pip requirements file](https://pip.pypa.io/en/stable/user_guide/#requirements-files) ржпрж╛ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ ржкрж┐ржк ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржзрж╛рж░ржг ржХрж░рзЗред

1. ржПржЦрж╛ржирзЗ `local.settings.json` ржлрж╛ржЗрж▓ржЯрж┐рж░ рж╕рзНржЯрзЛрж░рзЗржЬ ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзЗржЯрж┐ржВрж╕ рж░ржпрж╝рзЗржЫрзЗ ржпрж╛ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗред ржПржЯрж┐рж░ ржбрж┐ржлрж▓рзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржПржХржЯрж┐ ржлрж╛ржБржХрж╛ рж╕рзЗржЯрж┐ржВ ржЖржЫрзЗ, рж╕рзБрждрж░рж╛ржВ ржПржЯрж┐ рж╕рзЗржЯ ржХрж░рж╛ ржжрж░ржХрж╛рж░ред Azurite рж╕рзНржерж╛ржирзАржпрж╝ рж╕рзНржЯрзЛрж░рзЗржЬ ржПржорзБрж▓рзЗржЯрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржХрж░рждрзЗ, ржПржЗ ржорж╛ржиржЯрж┐ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржнрж╛ржмрзЗ рж╕рзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗ:

    ```json
    "AzureWebJobsStorage": "UseDevelopmentStorage=true",
    ```

1. ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржлрж╛ржЗрж▓ржЧрзБрж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкрж┐ржк ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ рж╣ржмрзЗ:

    ```sh
    pip install -r requirements.txt
    ```

    > ЁЯТБ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржкрж┐ржк ржкрзНржпрж╛ржХрзЗржЬржЧрзБрж▓рж┐ ржПржЗ ржлрж╛ржЗрж▓рзЗ ржерж╛ржХрж╛ ржжрж░ржХрж╛рж░, ржпрж╛рждрзЗ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржпржЦржи ржХрзНрж▓рж╛ржЙржбрзЗ рж╕рзНржерж╛ржкржи ржХрж░рж╛ рж╣ржмрзЗ, рждржЦржи рж░рж╛ржиржЯрж╛ржЗржо ржпрзЗржи ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржпрзЗ рж╕ржарж┐ржХ ржкрзНржпрж╛ржХрзЗржЬржЧрзБрж▓рж┐ ржЗржирж╕рзНржЯрж▓ рж╣рзЯрзЗржЫрзЗред

1. рж╕ржмржХрж┐ржЫрзБ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ рждрж╛ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рждрзЗ ржЖржорж░рж╛ ржлрж╛ржВрж╢ржи рж░рж╛ржиржЯрж╛ржЗржо рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржПржЯрж┐ ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржбржЯрж┐ рж░рж╛ржи ржжрж┐ржЗ:

    ```sh
    func start
    ```

   ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ ржпрзЗ рж░рж╛ржиржЯрж╛ржЗржо рж╢рзБрж░рзБ рж╣рзЯрзЗржЫрзЗ ржХрж┐ржирзНрждрзБ рждрж╛ рж░рж┐ржкрзЛрж░рзНржЯ ржХрж░ржмрзЗ ржпрзЗ ржПржЯрж┐ ржХрзЛржи ржЬржм ржлрж╛ржВрж╢ржи (ржЯрзНрж░рж┐ржЧрж╛рж░) ржЦрзБржБржЬрзЗ ржкрж╛ржпрж╝ ржирж┐ред
   
    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    [2021-05-05T01:24:46.795Z] No job functions found.
    ```

    > тЪая╕П ржХрзЛржи ржлрж╛рзЯрж╛рж░ржУрзЯрж╛рж▓ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржЖрж╕рж▓рзЗ, ржПржХрж╕рзЗрж╕ ржжрж┐рждрзЗ рж╣ржмрзЗ ржХрж╛рж░ржг `func` ржПржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐рж░ ржПржЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ рж╣ржмрзЗред

    > тЪая╕П ржорзНржпрж╛ржХ-ржУржПрж╕ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАржжрзЗрж░ ржЖржЙржЯржкрзБржЯржЯрж┐рждрзЗ ржУрзЯрж╛рж░рзНржирж┐ржВ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ:
    >
    > ```output
    > (.venv) тЮЬ  soil-moisture-trigger func start
    > Found Python version 3.9.1 (python3).
    >
    > Azure Functions Core Tools
    > Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    > Function Runtime Version: 3.0.15417.0
    >
    > [2021-06-16T08:18:28.315Z] Cannot create directory for shared memory usage: /dev/shm/AzureFunctions
    > [2021-06-16T08:18:28.316Z] System.IO.FileSystem: Access to the path '/dev/shm/AzureFunctions' is denied. Operation not permitted.
    > [2021-06-16T08:18:30.361Z] No job functions found.
    > ```
    >
    > ржпрждржХрзНрж╖ржг ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ рж╢рзБрж░рзБ рж╣ржЪрзНржЫрзЗ ржПржмржВ ржЪрж▓ржорж╛ржи ржлрж╛ржВрж╢ржиржЧрзБрж▓рж┐рж░ рждрж╛рж▓рж┐ржХрж╛ ржарж┐ржХржнрж╛ржмрзЗ ржжрзЗржЦрж╛ржЪрзНржЫрзЗ, рждрждржХрзНрж╖ржг ржПрж╕ржм ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░рж╛ ржпрж╛рзЯред ржПржЦрж╛ржирзЗ [Microsoft Docs Q&A](https://docs.microsoft.com/answers/questions/396617/azure-functions-core-tools-error-osx-devshmazurefu.html?WT.mc_id=academic-17441-jabenn) рждрзЗржУ ржПржоржиржЗ ржмрж▓рж╛ рж╣рзЯрзЗржЫрзЗред

1. ржПржмрж╛рж░ `ctrl+c` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Functions app ржмржирзНржз ржХрж░рж┐ред

1. VS Code ржП ржмрж░рзНрждржорж╛ржи ржлрзЛрж▓рзНржбрж╛рж░ржЯрж┐ ржУржкрзЗржи ржХрж░рж┐:

    ```sh
    code .
    ```

    ржнрж┐ржПрж╕ ржХрзЛржб ржЖржорж╛ржжрзЗрж░ ржлрж╛ржВрж╢ржи ржкрзНрж░ржЬрзЗржХрзНржЯ рж╕ржирж╛ржХрзНржд ржХрж░рзЗ ржПржХржЯрж┐ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржжрзЗржЦрж┐ржпрж╝рзЗ ржмрж▓ржмрзЗ:

    ```output
    Detected an Azure Functions Project in folder "soil-moisture-trigger" that may have been created outside of
    VS Code. Initialize for optimal use with VS Code?
    ```

    ![The notification](../../../../images/vscode-azure-functions-init-notification.png)

    ржПржЦрж╛ржирзЗ **Yes** рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рждрзЗ рж╣ржмрзЗред

1. ржнрж┐ржПрж╕ ржХрзЛржб ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржнрж╛рж░рзНржЪрзБрзЯрж╛рж▓ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ рж░рж╛ржи ржХрж░ржЫрзЗ - ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗ

## ржПржХржЯрж┐ ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рж┐ ржХрж░рж╛

ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╣рж▓рзЛ ржЖржорж╛ржжрзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХрзЛржбрзЗрж░ рж╢рзЗрж▓ред ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржЗржнрзЗржирзНржЯржЧрзБрж▓рж┐рж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржЬрж╛ржирж╛рждрзЗ, ржПржЗ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐рждрзЗ ржПржХржЯрж┐ ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржЯрзНрж░рж┐ржЧрж╛рж░ ржпрзБржХрзНржд ржХрж░рж╛ ржпрж╛рзЯред ржПржЗ ржЯрзНрж░рж┐ржЧрж╛рж░ржЯрж┐ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗ ржЖрж╕рж╛ ржмрж╛рж░рзНрждрж╛ржкрзНрж░ржмрж╛рж╣рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржерж╛ржХрж╛ ржжрж░ржХрж╛рж░ ржПржмржВ рждрж╛ржжрзЗрж░ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ ржЬрж╛ржирж╛ржирзЛрж░ рж╕ржХрзНрж╖ржорждрж╛ ржЕрж░рзНржЬржи ржХрж░рждрзЗ рж╣ржмрзЗред ржирж┐рзЯржорж┐рждржнрж╛ржмрзЗ ржмрж╛рж░рзНрждрж╛ ржкрзЗрждрзЗ ржЖржорж╛ржжрзЗрж░ ржЯрзНрж░рж┐ржЧрж╛рж░ржЯрж┐ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗ *event hub compatible endpoint* ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржи ржХрж░рж╛ ржжрж░ржХрж╛рж░ред

ржЖржЗржУржЯрж┐ рж╣рж╛ржмржЯрж┐ Azure Event Hubs ржирж╛ржорзЗ ржкрж░рж┐ржЪрж┐ржд ржЖрж░рзЗржХржЯрж┐ ржЕрзНржпрж╛ржЬрзБрж░ рж╕рж╛рж░рзНржнрж┐рж╕рзЗрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНрждред ржЗржнрзЗржирзНржЯ рж╣рж╛ржмрж╕ ржПржоржи ржПржХржЯрж┐ ржкрж░рж┐рж╖рзЗржмрж╛ ржпрж╛ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржмрж╛рж░рзНрждрж╛ ржкрзНрж░рзЗрж░ржг ржПржмржВ ржЧрзНрж░рж╣ржг ржХрж░рждрзЗ ржжрзЗржпрж╝, ржЖржЗржУржЯрж┐ рж╣рж╛ржмржЯрж┐ рждржЦржи ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп  ржЕрждрж┐рж░рж┐ржХрзНржд ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржпрзБржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржерзЗржХрзЗ ржпрзЗржнрж╛ржмрзЗ ржЖржорж░рж╛ ржмрж╛рж░рзНрждрж╛ ржЧрзНрж░рж╣ржг ржХрж░рзЗржЫрж┐, ржЗржнрзЗржирзНржЯ рж╣рж╛ржмрзЗржУ ржПржХржжржо ржПржХржЗржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛  ржпрж╛рзЯред

тЬЕ ржХрж┐ржЫрзБ ржЧржмрзЗрж╖ржгрж╛ ржХрж░рж╛ ржпрж╛ржХ: [Azure Event Hubs documentation](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=academic-17441-jabenn) ржерзЗржХрзЗ ржЗржнрзЗржирзНржЯ рж╣рж╛ржм рж╕ржорзНржкрж░рзНржХрзЗ ржПржХржЯрж┐ рж╕рж╛ржоржЧрзНрж░рж┐ржХ ржзрж╛рж░ржгрж╛ рж▓рж╛ржн ржХрж░рзЗ, ржПржЯрж┐рж░ рж╕рж╛ржзрж╛рж░ржг ржкрж░рзНржпрж╛рзЯрзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржпржЧрзБрж▓рзЛржХрзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рждрзБрж▓ржирж╛ ржХрж░рж┐ред

ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ рж╕рзНржерж╛ржкржирзЗрж░ ржЬржирзНржп ржпрзЗржХрзЛржи ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ ржПржХржЯрж┐ ржЧрзЛржкржи ржХрзА ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗ ржпрж╛ ржХрзЗржмрж▓ржорж╛рждрзНрж░ ржЕржирзБржорзЛржжрж┐ржд ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рж┐ рж╕ржВржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐ ржкрзЬрж╛рж░ ржЬржирзНржп рж╕ржВржпрзЛржЧ ржХрж░рж╛рж░ рж╕ржоржпрж╝ржУ ржПржХржЗ ржмрж┐рж╖рзЯ ржкрзНрж░ржпрзЛржЬрзНржп, ржЖржорж╛ржжрзЗрж░ ржХрзЛржбржЯрж┐рждрзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ ржмрж┐ржмрж░ржг рж╕рж╣ ржПржХржЯрж┐ ржЧрзЛржкржи ржХрзА ржпрзБржХрзНржд connection string ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржмрзЗред

> ЁЯТБ ржЖржорж░рж╛ ржбрж┐ржлрж▓рзНржЯ ржпрзЗ connection string ржкрж╛ржЗ, рж╕рзЗржЯрж┐рждрзЗ **iothubowner** ржПрж░ ржкрж╛рж░рзНржорж┐рж╢ржи ржерж╛ржХрзЗ ржпрж╛ ржХрзЛржи ржХрзЛржбрзЗ ржерж╛ржХрж▓рзЗ - рж╕ржорзНржкрзВрж░рзНржг ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗ ржПржХрж╕рзЗрж╕/ржЕржирзБржорждрж┐ ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред ржПржЯрж┐ржХрзЗ ржЖрж╕рж▓рзЗ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржЕржирзБржорждрж┐ржЧрзБрж▓рж┐рж░ рж╕рж░рзНржмржирж┐ржорзНржи рж╕рзНрждрж░рзЗ ржЕрж░рзНржерж╛рзО ржХржо ржкрж╛рж░рзНржорж┐рж╢ржирзЗ рж░рж╛ржЦрж╛ ржЙржЪрж┐рждред ржкрж░ржмрж░рзНрждрзА ржкрж╛ржарзЗ ржПржЯрж┐ ржирж┐рзЯрзЗ ржмрж┐рж╖ржж ржЖрж▓рзЛржЪржирж╛ рж╣ржмрзЗред

ржЯрзНрж░рж┐ржЧрж╛рж░ржЯрж┐ ржПржХржмрж╛рж░ рж╕ржВржпрзБржХрзНржд рж╣ржпрж╝рзЗ ржЧрзЗрж▓рзЗржЗ, ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ ржХрж╛ржЫрзЗ ржкрзНрж░рзЗрж░рж┐ржд ржкрзНрж░рждрж┐ржЯрж┐ ржмрж╛рж░рзНрждрж╛рж░ ржЬржирзНржп - ржлрж╛ржВрж╢ржирзЗрж░ ржХрзЛржбржЯрж┐ ржХрж▓ ржХрж░рж╛ рж╣ржмрзЗ,рждрж╛ рж╕рзЗржЗ ржорзНржпрж╛рж╕рзЗржЬ ржпрзЗ ржбрж┐ржнрж╛ржЗрж╕ ржерзЗржХрзЗржЗ ржкрзНрж░рзЗрж░рж┐ржд рж╣рзЛржХ ржирж╛ ржХрзЗржиред

### ржХрж╛ржЬ - Event Hub compatible endpoint connection string рждрзИрж░рзА

1.  VS Code ржЯрж╛рж░рзНржорж┐ржирж╛рж▓ ржерзЗржХрзЗ ржирж┐ржорзНржирзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рж┐:

    ```sh
    az iot hub connection-string show --default-eventhub \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    ржПржЦрж╛ржирзЗ `<hub_name>` ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржЖржорж╛ржжрзЗрж░ ржмрзНржпржмрж╣рзГржд рж╣рж╛ржмрзЗрж░ ржирж╛ржоржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред

1. ржПржмрж╛рж░ VS Code ржП `local.settings.json` ржлрж╛ржЗрж▓ржЯрж┐ ржУржкрзЗржи ржХрж░рзЗ, `Values` ржЕржВрж╢рзЗрж░ ржирж┐ржорзНржирзЗрж░ ржЕрждрж┐рж░рж┐ржХрзНржд ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ ржпрзЛржЧ ржХрж░рж┐:

    ```json
    "IOT_HUB_CONNECTION_STRING": "<connection string>"
    ```

    ржПржЦрж╛ржирзЗ ржЖржЧрзЗрж░ рж╕рзНржЯрзЗржк ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржнрзНржпрж╛рж▓рзБрзНржЯрж┐ `<connection string>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржмрж╕рж╛ржЗред JSON ржлрж╛ржЗрж▓ржЯрж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ рждрзИрж░рзА ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЙржкрж░рзЗрж░ рж▓рж╛ржЗржирзЗрж░ ржкрж░рзЗ ржХржорж╛ ржпрзБржХрзНржд ржХрж░рждрзЗ рж╣ржмрзЗред

### ржХрж╛ржЬ - ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рзА

ржЖржорж░рж╛ ржПржЦржи ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рзА ржХрж░рж╛рж░ ржХрж╛ржЬ рж╢рзБрж░рзБ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред

1.  ржПржЦржи `soil-moisture-trigger` ржлрзЛрж▓рзНржбрж╛рж░ ржерзЗржХрзЗ  VS Code terminal ржЪрж╛рж▓рзБ  ржХрж░рзЗ ржирж┐ржорзНржирзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рж┐:

    ```sh
    func new --name iot-hub-trigger --template "Azure Event Hub trigger"
    ```

    ржПржЯрж┐ `iot-hub-trigger` ржирж╛ржорзЗ ржирждрзБржи ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи рждрзИрж░рзА ржХрж░ржмрзЗред ржПржЗ ржЯрзНрж░рж┐ржЧрж╛рж░ржЯрж┐  Event Hub compatible endpoint ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд  рж╣ржмрзЗред ржПржЦржи ржЖржорж░рж╛ ржЗржнрзЗржирзНржЯ  рж╣рж╛ржм ржЯрзНрж░рж┐ржЧрж╛рж░ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

ржПржЦржи ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ `soil-moisture-trigger` ржлрзЛрж▓рзНржбрж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ `iot-hub-trigger` ржирж╛ржорзЗ ржЖрж░рзЗржХржЯрж┐ ржлрзЛрж▓рзНржбрж╛рж░ рждрзИрж░рзА рж╣ржмрзЗ ржпрзЗржЯрж┐рждрзЗ ржлрж╛ржВрж╢ржи рж░рзЯрзЗржЫрзЗред ржПржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржерж╛ржХржмрзЗ:

* `__init__.py` - ржПржЗ ржкрж╛ржЗржержи ржлрж╛ржЗрж▓рзЗ ржЯрзНрж░рж┐ржЧрж╛рж░ рж░рзЯрзЗржЫрзЗ ржПржмржВ ржПржЯрж┐ржХрзЗ ржоржбрж┐ржЙрж▓ рж╣рж┐рж╕рж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп ржХрж░рж╛рж░ ржЬржирзНржп рж╕рж╛ржзрж╛рж░ржг ржирзАрждрж┐ ржЕржирзБрж╕рж╛рж░рзЗ ржПржнрж╛ржмрзЗ ржирж╛ржоржХрж░ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред 

    ржПржЗ ржлрж╛ржЗрж▓рзЗ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрзЛржб:

    ```python
    from typing import List
    import logging
    import azure.functions as func
    
    def main(events: List[func.EventHubEvent]):
        for event in events:
            logging.info('Python EventHub trigger processed an event: %s',
                            event.get_body().decode('utf-8'))
    ```

    ржПржЗ ржЯрзНрж░рж┐ржЧрж╛рж░рзЗрж░ ржорзВрж▓ ржЪрж╛ржмрж┐ржХрж╛ржарж┐ рж░рзЯрзЗржЫрзЗ  `main` ржлрж╛ржВрж╢ржирзЗ ред ржЖржЗржУржЯрж┐ рж╣рж╛ржм  ржерзЗржХрзЗ ржЗржнрзЗржирзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржПржЗ ржлрж╛ржВрж╢ржиржХрзЗржЗ ржХрж▓ ржХрж░рж╛ рж╣рзЯред  ржлрж╛ржВрж╢ржиржЯрж┐рждрзЗ  `events` ржирж╛ржорзЗ ржПржХржЯрж┐ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ рж░рзЯрзЗржЫрзЗ ржпрзЗржЯрж┐рждрзЗ  `EventHubEvent` рж▓рж┐рж╕рзНржЯ рж░рзЯрзЗржЫрзЗред ржПржЗ рж▓рж┐рж╕рзНржЯрзЗрж░  ржкрзНрж░рждрж┐ржЯрж┐  ржЗржнрзЗржирзНржЯ ржорзВрж▓ржд ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗ ржкрж╛ржарж╛ржирзЛ ржПржХ ржПржХржЯрж┐ ржорзНржпрж╛рж╕рзЗржЬ ржпрж╛рждрзЗ ржПржирзЛржЯрзЗрж╢ржирзЗрж░ ржоржд ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ржУ ржЕржирзНрждрж░рзНржнрзВржХрзНржд ржерж╛ржХрзЗ ржпрзЗржоржиржЯрж╛ ржЖржорж░рж╛ ржЧржд рж▓рзЗрж╕ржирзЗ  ржжрзЗржЦрзЗржЫрж┐ред

    ржПржЗ  ржЯрзНрж░рж┐ржЧрж╛рж░ржЯрж┐  ржкрзНрж░рждрж┐ржЯрж┐ ржЗржнрзЗржирзНржЯ ржПржХржЯрж┐ ржПржХржЯрж┐ ржХрж░рзЗ ржирзЯ, ржмрж░ржВ ржЕржирзЗржХржЧрзБрж▓рзЛ ржЗржнрзЗржирзНржЯрзЗрж░ ржПржХржЯрж┐ рж▓рж┐рж╕рзНржЯ ржПржХрж╕рж╛ржерзЗ ржирж┐рзЯрзЗ ржХрж╛ржЬ ржХрж░рзЗред ржпржЦржи ржкрзНрж░ржержоржмрж╛рж░ ржЯрзНрж░рж┐ржЧрж╛рж░ рж░рж╛ржи ржХрж░рж╛ рж╣рзЯ, рждржЦржи ржПржЯрж┐ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ ржЕрж╕ржорж╛ржкрзНржд ржЗржнрзЗржирзНржЯржЧрзБрж▓рзЛрж░ ржХрж╛ржЬ ржЖржЧрзЗ рж╕ржорж╛ржкрзНржд ржХрж░рзЗред рждрж╛рж░ржкрж░ ржпржжрж┐ ржЦрзБржм ржЕрж▓рзНржк  рж╕ржорзЯрзЗрж░ ржнрзЗрждрж░рзЗ рж╣рж╛ржмрзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ ржЗржнрзЗржирзНржЯ ржкрж╛ржарж╛ржирзЛ ржирж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐  ржПржХржЯрж┐ ржЗржнрзЗржирзНржЯ  рж╕ржорзНржмрж▓рж┐ржд рж▓рж┐рж╕рзНржЯ ржирж┐рзЯрзЗ  ржХрж╛ржЬ рж╢рзБрж░рзБ ржХрж░рзЗ ржжрж┐ржмрзЗред

    ржПржЗ ржлрж╛ржВрж╢ржи ржорзВрж▓ржд рж▓рж┐рж╕рзНржЯ ржзрж░рзЗ ржХрж╛ржЬ ржХрж░рзЗ ржПржмржВ ржЗржнрзЗржирзНржЯржЧрзБрж▓рзЛ ржиржерж┐ржмржжрзНржз рж░рж╛ржЦрзЗред 

* `function.json` - ржПржЯрж┐рждрзЗ ржЯрзНрж░рж┐ржЧрж╛рж░рзЗрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржерж╛ржХрзЗ ржпрж╛ ржорзВрж▓ржд `bindings` ржЕржВрж╢рзЗ  ржЖржорж░рж╛ ржжрзЗржЦрж┐ред  ржмрж╛ржЗржирзНржбрж┐ржВ рж╣рж▓рзЛ ржорзВрж▓ржд  Azure Functions ржПржмржВ ржЕржирзНржпрж╛ржирзНржп  Azure services ржПрж░ ржоржзрзНржпржХрж╛рж░ рж╕ржВржпрзЛржЧред ржПржЯрж┐рждрзЗ input binding ржерж╛ржХрзЗ, ржХрзЛржи ржПржХржЯрж┐ ржЗржнрзЗржирзНржЯ рж╣рж╛ржмрзЗрж░ ржЬржирзНржп -  ржпрж╛  ржЗржнрзЗржирзНржЯ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд рж╣рзЯ ржПржмржВ ржбрзЗржЯрж╛ ржЧрзНрж░рж╣ржг ржХрж░рзЗред 

    > ЁЯТБ ржПржЫрж╛рзЬрж╛ржУ ржЖржорж░рж╛ ржЖржЙржЯржкрзБржЯ ржмрж╛ржЗржирзНржбрж┐ржВ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржпрж╛  ржХрзЛржи ржлрж╛ржВрж╢ржирзЗрж░ ржЖржЙржЯржкрзБржЯржХрзЗ  ржЖрж░рзЗржХржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕рзЗ  ржкрзНрж░рзЗрж░ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржпрзЗржоржи, ржХрзЛржи ржбрзЗржЯрж╛ржмрзЗрж╕рзЗрж░ рж╕рж╛ржерзЗ ржЖржЙржЯржкрзБржЯ ржмрж╛ржЗржирзНржбрж┐ржВ ржпрзЛржЧ ржХрж░рзЗ ржлрж╛ржВрж╢ржи ржжрзНржмрж╛рж░рж╛ ржЖржЗржУржЯрж┐  рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рждрзЗ ржжрж┐рж▓рзЗ  - рж╕ржХрж▓ ржбрзЗржЯрж╛ рж╕рзНржмржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗржЗ рж╕рзЗржЗ ржбрзЗржЯрж╛ржмрзЗрж╕ ржП  ржЪрж▓рзЗ ржЖрж╕ржмрзЗред 

    тЬЕ ржПржмрж╛рж░ ржХрж┐ржЫрзБ ржЧржмрзЗрж╖ржгрж╛ ржХрж░рж╛ ржпрж╛ржХ: ржмрж╛ржЗржирзНржбрж┐ржВрж╕ ржирж┐рзЯрзЗ  [Azure Functions triggers and bindings concepts documentation](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=academic-17441-jabenn&tabs=python)ржкрзЬрзЗ ржЖрж░рзЛ ржЬрзЗржирзЗ  ржирж┐ржЗ ржПржЗ ржмрж┐рж╖рзЯрзЗ ред

     `bindings` ржЕржВрж╢рзЗ ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржиржЧрзБрж▓рзЛ рж░рзЯрзЗржЫрзЗред ржПрж░ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХрж┐ржЫрзБ  ржнрзНржпрж╛рж▓рзБ рж╣рж▓рзЛ :

  * `"type": "eventHubTrigger"` - ржПржЯрж┐рж░ ржЕрж░рзНрже рж╣рж▓рзЛ ржлрж╛ржВрж╢ржиржХрзЗ ржЗржнрзЗржирзНржЯ рж╣рж╛ржм ржерзЗржХрзЗ ржЗржнрзЗржирзНржЯрзЗрж░  ржбрзЗржЯрж╛ ржЧрзНрж░рж╣ржг ржХрж░рждрзЗ  рж╣ржмрзЗред
  * `"name": "events"` - ржПржЗ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ржЯрж┐ ржЗржнрзЗржирзНржЯ рж╣рж╛ржмрзЗрж░ ржЗржнрзЗржирзНржЯрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржПржЯрж┐ ржкрж╛ржЗржержи ржХрзЛржбрзЗрж░ `main` function ржПрж░ рж╕рж╛ржерзЗ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржорж┐рж▓рж┐рзЯрзЗ  ржХрж╛ржЬ ржХрж░рзЗред
  * `"direction": "in"` - ржПржЯрж┐ ржЗржиржкрзБржЯ ржмрж╛ржЗржирзНржбрж┐ржВ, ржпрзЗржЦрж╛ржирзЗ  ржЗржнрзЗржирзНржЯ  рж╣рж╛ржм  ржерзЗржХрзЗ ржлрж╛ржВрж╢ржирзЗ ржбрзЗржЯрж╛ ржЖрж╕рзЗред
  * `"connection": ""` - ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржЧрзНрж░рж╣ржгрзЗрж░  ржпрзЗ рж╕рзЗржЯрж┐ржВ - рж╕рзЗржЯрж┐рж░ рж╕ржВржЬрзНржЮрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗред рж▓рзЛржХрж╛рж▓рж┐ рж░рж╛ржи  ржХрж░рж▓рзЗ, рж╕рзЗржЯрж┐ `local.settings.json` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ рж╕рзЗржЯрж┐ржВрж╕ рж░рзАржб ржХрж░рзЗред

    > ЁЯТБ  ржПржЗ  connection string ржХрж┐ржирзНрждрзБ `function.json` ржлрж╛ржЗрж▓рзЗ рж╕рзНржЯрзЛрж░ ржХрж░рж╛ ржпрж╛ржмрзЗржирж╛, ржПржЯрж┐ рж╕рзЗржЯрж┐ржВрж╕ ржерзЗржХрзЗржЗ рж░рзАржб ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЯрж┐ ржПржнрж╛ржмрзЗ рж╕рж╛ржЬрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ  ржпрж╛рждрзЗ ржЖржХрж╕рзНржорж┐ржХржнрж╛ржмрзЗ ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ ржкрзНрж░ржХрж╛рж╢рж┐ржд рж╣рзЯрзЗ ржирж╛ ржпрж╛рзЯред

1.  `"connection"` ржПрж░ ржнрзНржпрж╛рж▓рзБ `function.json` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржирж┐рждрзЗ рж╣ржмрзЗ ржпрж╛рждрзЗ ржирждрзБржи ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ  `local.settings.json` ржлрж╛ржЗрж▓рзЗ ржерж╛ржХрзЗ:

    ```json
    "connection": "IOT_HUB_CONNECTION_STRING",
    ```

    > ЁЯТБ ржоржирзЗ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ -  ржПржЯрж┐ ржпрзЗржи рж╕рзЗржЯрж┐ржВрж╕ ржП  ржкрзЯрзЗржирзНржЯ  ржХрж░рзЗ, ржПржмржВ ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ ржпрзЗржи ржПржЦрж╛ржирзЗ ржирж╛ ржерж╛ржХрзЗред

### ржХрж╛ржЬ - ржЗржнрзЗржирзНржЯ ржЯрзНрж░рж┐ржЧрж╛рж░ рж░рж╛ржи  ржХрж░рж╛

1.  ржПржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗ  ржпрзЗ ржЖржорж░рж╛ ржпрзЗржи ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржЗржнрзЗржирзНржЯ ржоржирж┐ржЯрж░рзЗ  рж░рж╛ржи ржирж╛ ржХрж░рж┐ред ржПржЯрж┐ ржПржмржВ ржлрж╛ржВрж╢ржи ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи ржпржжрж┐ ржПржХрж╕рж╛ржерзЗ  рж░рж╛ржи ржХрж░рзЗ, рждржмрзЗ ржлрж╛ржВрж╢ржи ржПржк ржпржерж╛ржпржержнрж╛ржмрзЗ ржЗржнрзЗржирзНржЯрзЗрж░ рж╕рж╛ржерзЗ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржирзЗржХрзНржЯ  рж╣рждрзЗ ржкрж╛рж░ржмрзЗржирж╛,  ржлрж▓рзЗ ржЗржнрзЗржирзНржЯрзЗрж░ ржбрзЗржЯрж╛ржУ  ржарж┐ржХржорждрзЛ ржкрж╛ржУрзЯрж╛ ржпрж╛ржмрзЗржирж╛ред 

    > ЁЯТБ ржПржХрж╛ржзрж┐ржХ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи ржПржЦрж╛ржирзЗ ржмрж┐ржнрж┐ржирзНржи  *consumer groups* ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржПржирзНржбржкрзЯрзЗржирзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд рж╣ржмрзЗред ржПржЗ рж╕ржВржХрзНрж░рж╛ржирзНрждрзЗ ржЖрж░рзЛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЖржорж░рж╛ ржкрж░ржмрж░рзНрждрзА  ржПржХржЯрж┐ ржЕржзрзНржпрж╛рзЯрзЗ ржЬрж╛ржиржмрзЛред

1. Functions app рж░рж╛ржи  ржХрж░рж╛рж░ ржЬржирзНржп,  VS Code terminal ржерзЗржХрзЗ ржирж┐ржорзНржирзЗрж░ ржХрзЛржбржЧрзБрж▓рзЛ рж░рж╛ржи ржжрж┐ржЗ

    ```sh
    func start
    ```

    ржлрж╛ржВрж╢ржи ржПржк  ржЪрж╛рж▓рзБ рж╣рзЯрзЗ, `iot-hub-trigger` ржлрж╛ржВрж╢ржиржЯрж┐ ржЦрзБржБржЬрзЗ ржирж┐ржмрзЗ ред рждрж╛рж░ржкрж░ ржПржЯрж┐ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗ ржЖрж╕рж╛ ржЗржнрзЗржирзНржЯрж╕ржорзВрж╣ ржкрзНрж░рж╕рзЗрж╕ ржХрж░ржмрзЗред 

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    Functions:
    
            iot-hub-trigger: eventHubTrigger
    
    For detailed output, run func with --verbose flag.
    [2021-05-05T02:44:07.517Z] Worker process started and initialized.
    [2021-05-05T02:44:09.202Z] Executing 'Functions.iot-hub-trigger' (Reason='(null)', Id=802803a5-eae9-4401-a1f4-176631456ce4)
    [2021-05-05T02:44:09.205Z] Trigger Details: PartionId: 0, Offset: 1011240-1011632, EnqueueTimeUtc: 2021-05-04T19:04:04.2030000Z-2021-05-04T19:04:04.3900000Z, SequenceNumber: 2546-2547, Count: 2
    [2021-05-05T02:44:09.352Z] Python EventHub trigger processed an event: {"soil_moisture":628}
    [2021-05-05T02:44:09.354Z] Python EventHub trigger processed an event: {"soil_moisture":624}
    [2021-05-05T02:44:09.395Z] Executed 'Functions.iot-hub-trigger' (Succeeded, Id=802803a5-eae9-4401-a1f4-176631456ce4, Duration=245ms)
    ```

    ржПржЗ ржлрж╛ржВрж╢ржирзЗрж░ ржкрзНрж░рждрж┐ржЯрж┐ ржХрж▓рзЗ `Executing 'Functions.iot-hub-trigger'` ржЕржержмрж╛ `Executed 'Functions.iot-hub-trigger'` ржмрзНрж▓ржХржЧрзБрж▓рзЛ ржЖржЙржЯржкрзБржЯрзЗ ржЖрж╕ржмрзЗред ржПрждрзЗ ржХрж░рзЗ ржЖржорж░рж╛ ржЬрж╛ржирждрзЗ ржкрж╛рж░ржмрзЛ ржкрзНрж░рждрж┐ржЯрж┐ ржлрж╛ржВрж╢ржи ржХрж▓рзЗ ржХрждржЯрж┐ ржорзНржпрж╛рж╕рзЗржЬ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред

    > ржпржжрж┐ ржирж┐ржЪрзЗрж░ ржПржЗ ржПрж░рж░ржЯрж┐ ржЖрж╕рзЗ:

      ```output
      The listener for function 'Functions.iot-hub-trigger' was unable to start. Microsoft.WindowsAzure.Storage: Connection refused. System.Net.Http: Connection refused. System.Private.CoreLib: Connection refused.
      ```

      рждрж╛рж╣рж▓рзЗ, ржПржЯрж╛ ржжрзЗржЦрждрзЗ рж╣ржмрзЗ ржпрзЗ  Azurite ржЪрж▓ржЫрзЗ ржХрж┐ржирж╛  ржПржмржВ ржЖржорж░рж╛  `local.settings.json`ржлрж╛ржЗрж▓рзЗ  `AzureWebJobsStorage` ржХрзЗ `UseDevelopmentStorage=true` ржХрж░рзЗржЫрж┐ ржХрж┐ржирж╛ рж╕рзЗржЗ ржмрж┐рж╖рзЯржЯрж┐ржУ ржЖржорж╛ржжрзЗрж░ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗред

1.  ржПржЦржи ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЖржорж╛ржжрзЗрж░ ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ ржЪрж▓ржЫрзЗ ржХрж┐ржирж╛ ржЦрзЗрзЯрж╛рж▓ рж░рж╛ржЦржЯрзЗ рж╣ржмрзЗ ржПржмржВ ржжрзЗржЦрждрзЗ ржкрж╛ржм ржпрзЗ ржлрж╛ржВрж╢ржи ржПржк ржП ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛рж░ ржирждрзБржи ржорж╛ржиржЧрзБрж▓рзЛ ржжрзЗржЦрж╛ржЪрзНржЫрзЗред

1. Functions app ржмржирзНржз ржХрж░рзЗ рждрж╛ Restart ржХрж░рж┐ред ржжрзЗржЦрж╛ ржпрж╛ржмрзЗ  ржПржЯрж┐ ржЖрж░  ржЖржЧрзЗрж░ ржорзНржпрж╛рж╕рзЗржЬржЧрзБрж▓рзЛ ржкрзНрж░рж╕рзЗрж╕ ржХрж░ржЫрзЗржирж╛,  ржХрзЗржмрж▓ ржирждрзБржи  ржорзНржпрж╛рж╕рзЗржЬржЧрзБрж▓рзЛ ржирж┐рзЯрзЗржЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред

> ЁЯТБ VS Code ржерзЗржХрзЗржЗ ржлрж╛ржВрж╢ржи ржбрж┐ржмрж╛ржЧ ржХрж░рж╛ ржпрж╛рзЯред ржкрзНрж░рждрж┐ржЯрж┐ рж▓рж╛ржЗржирзЗрж░ рж╢рзБрж░рзБрждрзЗ ржмрж░рзНржбрж╛рж░рзЗрж░ ржЕржВрж╢рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржЕржержмрж╛ ржХрж╛рж░рзНрж╕рж░ржХрзЗ ржХрзЛржи рж▓рж╛ржЗржирзЗ рж░рзЗржЦрзЗ рждрж╛рж░ржкрж░ *Run -> Toggle breakpoint* ржП  ржЧрж┐рзЯрзЗ ржмрж╛ `F9` ржкрзНрж░рзЗрж╕ ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржмрзНрж░рзЗржХржкрзЯрзЗржирзНржЯ  рж╕рзЗржЯ  ржХрж░рж╛ ржпрж╛рзЯред ржПржЫрж╛рзЬрж╛ржУ ржбрж┐ржмрж╛ржЧрж╛рж░ launch ржХрж░рж╛рж░ ржЬржирзНржп *Run -> Start debugging* ржП ржЧрж┐рзЯрзЗ ржмрж╛ `F5` ржкрзНрж░рзЗрж╕ ржХрж░рзЗ ржЕржержмрж╛ ржЖржорж░рж╛ *Run and debug* ржП ржЧрж┐рзЯрзЗ **Start debugging** ржП ржХрзНрж▓рж┐ржХ ржХрж░рждрзЗ рж╣ржмрзЗред  ржПржЦрж╛ржи ржерзЗржХрзЗ ржЗржнрзЗржирзНржЯ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржПрж░ ржбрж┐ржЯрзЗржЗрж▓рж╕ ржЬрж╛ржирж╛ ржпрж╛ржмрзЗред

## рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХрзЛржб ржерзЗржХрзЗ ржбрж┐рж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ

ржПржЦржи ржкрж░рзНржпржирзНржд ржЖржорж╛ржжрзЗрж░ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЯрж┐ ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржерзЗржХрзЗ ржЗржнрзЗржирзНржЯ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржоржЮрзНржЬрж╕рзНржпржкрзВрж░рзНржг ржПржирзНржб ржкржпрж╝рзЗржирзНржЯржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржбрзЗржЯрж╛ ржЧрзНрж░рж╣ржг ржХрж░ржЫрзЗред ржЖржорж╛ржжрзЗрж░ржХрзЗ ржПржЦржи ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕рзЗ ржХржорж╛ржирзНржб ржкрзНрж░рзЗрж░ржг ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЯрж┐ *рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рж┐ ржорзНржпрж╛ржирзЗржЬрж╛рж░* ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ ржПржХржЯрж┐ ржЖрж▓рж╛ржжрж╛ рж╕ржВржпрзЛржЧ ржжрзНржмрж╛рж░рж╛ ржХрж░рж╛ рж╣ржпрж╝ред рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рж┐ ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржПржоржи ржПржХржЯрж┐ ржЯрзНржпрзБрж▓ ржпрж╛ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ ржХрзА ржХрзА ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рж┐ ржирж┐ржмржирзНржзржнрзБржХрзНржд рж░ржпрж╝рзЗржЫрзЗ рждрж╛ ржжрзЗржЦрждрзЗ ржПржмржВ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рзЛрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рж╛рж░ ржЬржирзНржп ржХрзНрж▓рж╛ржЙржб ржерзЗржХрзЗ ржбрж┐ржнрж╛ржЗрж╕рзЗ ржорзНржпрж╛рж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛрж░ рж╕рзБржпрзЛржЧ ржжрзЗржпрж╝ред ржПржХрзНрж╖рзЗрждрзНрж░рзЗ direct method requests ржмрж╛ ржбрж┐ржнрж╛ржЗрж╕ ржЯрзБржЗржи ржЖржкржбрзЗржЯ ржХрж░рж╛рж░ ржорж╛ржзрзНржпржорзЗ рждрж╛ ржХрж░рж╛ рж╣рзЯред ржПржЫрж╛рзЬрж╛ржУ ржЖржорж░рж╛ ржПржЯрж┐ ржжрзНржмрж╛рж░рж╛ ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржерзЗржХрзЗ ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ржЧрзБрж▓рж┐ ржирж┐ржмржирзНржзржХрж░ржг, ржЖржкржбрзЗржЯ ржХрж░рждрзЗ ржмрж╛ ржбрж┐рж▓рж┐ржЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

 Registry Manager ржПрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп Connection String ржжрж░ржХрж╛рж░ржГ

### ржХрж╛ржЬ - Registry Manager ржПрж░ ржЬржирзНржп connection string ржирзЗрзЯрж╛

1. ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рж┐:

    ```sh
    az iot hub connection-string show --policy-name service \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    ржПржЦрж╛ржирзЗ `<hub_name>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржорж╛ржжрзЗрж░ ржмрзНржпржмрж╣рзГржд ржирж╛ржоржЯрж┐ ржмрж╕рж╛ржЗред

     *ServiceConnect* ржкрж▓рж┐рж╕рж┐рж░ `--policy-name service` ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░рзЗрж░ ржорж╛ржзрзНржпржорзЗ ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВ ржЪрж╛ржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред ржЖржорж░рж╛ ржпржЦржи connection string ржПрж░ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржХрж░рж┐, ржкрж╛рж░рзНржорж┐рж╢ржиржЧрзБрж▓рзЛ ржкрзНрж░рзЯрзЛржЬржиржорждрзЛ ржарж┐ржХ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред ржПржЦрж╛ржирзЗ ServiceConnect ржкрж▓рж┐рж╕рж┐ ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕рзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗ ржорзНржпрж╛рж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛрж░ рж╕рзБржпрзЛржЧ ржжрзЗрзЯред

    тЬЕ ржХрж┐ржЫрзБ ржЧржмрзЗрж╖ржгрж╛ ржХрж░рж╛ ржпрж╛ржХ: [IoT Hub permissions documentation](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-security#iot-hub-permissions?WT.mc_id=academic-17441-jabenn) ржерзЗржХрзЗ ржмрж┐ржнрж┐ржирзНржи ржкрж▓рж┐рж╕рж┐  рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржирждрзЗ рж╣ржмрзЗред

1. VS Code ржП `local.settings.json` ржлрж╛ржЗрж▓ржЯрж┐ ржУржкрзЗржи ржХрж░рж┐ред рждрж╛рж░ржкрж░ `Values` ржЕржВрж╢рзЗ ржирж┐ржЪрзЗрж░ ржмрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ ржпрзЛржЧ ржХрж░рж┐:

    ```json
    "REGISTRY_MANAGER_CONNECTION_STRING": "<connection string>"
    ```

    ржПржЦрж╛ржирзЗ ржЖржЧрзЗрж░ рж╕рзНржЯрзЗржк ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржнрзНржпрж╛рж▓рзБрзНржЯрж┐ `<connection string>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржмрж╕рж╛ржЗред JSON ржлрж╛ржЗрж▓ржЯрж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ рждрзИрж░рзА ржХрж░рждрзЗ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржЙржкрж░рзЗрж░ рж▓рж╛ржЗржирзЗрж░ ржкрж░рзЗ ржХржорж╛ ржпрзБржХрзНржд ржХрж░рждрзЗ рж╣ржмрзЗред

### ржХрж╛ржЬ - ржбрж┐ржнрж╛ржЗрж╕рзЗ direct method request ржкрж╛ржарж╛ржирзЛ

1. Registry Manager ржПрж░ SDK рж╕рж╣ржЬрзЗржЗ Pip package ржПрж░ ржорж╛ржзрзНржпржорзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛ржмрзЗред  `requirements.txt` ржлрж╛ржЗрж▓рзЗ ржирж┐ржЪрзЗрж░ рж▓рж╛ржЗржиржЧрзБрж▓рзЛ ржпрзЛржЧ ржХрж░рж┐ ржкрзНржпрж╛ржХрзЗржЬрзЗрж░ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржПржб ржХрж░рж╛рж░ ржЬржирзНржп:

    ```sh
    azure-iot-hub
    ```

1. Pip package ржЗржирзНрж╕ржЯрж▓ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗ ржпрзЗ ржЖржорж░рж╛ virtual environment ржПржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рзЗржЗ ржнрж┐ржПрж╕ ржХрзЛржбрзЗ ржХрж╛ржЬ ржХрж░ржЫрж┐ :

    ```sh
    pip install -r requirements.txt
    ```

1.  `__init__.py` ржлрж╛ржЗрж▓рзЗ ржирж┐ржЪрзЗрж░  ржЗржорзНржкрзЛрж░рзНржЯржЧрзБрж▓рзЛ ржпрзБржХрзНржд ржХрж░рж┐:

    ```python
    import json
    import os
    from azure.iot.hub import IoTHubRegistryManager
    from azure.iot.hub.models import CloudToDeviceMethod
    ```

     ржПржЯрж┐ ржХрж┐ржЫрзБ рж╕рж┐рж╕рзНржЯрзЗржо рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржПржмржВ Registry Manager рж╕рж╛ржерзЗ ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрзНржЯ ржХрж░рждрзЗ ржПржмржВ direct method requests ржкрзНрж░рзЗрж░ржгрзЗрж░ ржЬржирзНржп ржЖрж░рзЛ ржХрж┐ржЫрзБ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржорзНржкрзЛрж░рзНржЯ ржХрж░рзЗред

1. `main` ржорзЗржержб ржерзЗржХрзЗ ржХрзЛржбржЧрзБрж▓рзЛ рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓рж┐, рждржмрзЗ ржорзЗржержбржЯрж┐ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗред

1. ржпржЦржи ржПржХрж╛ржзрж┐ржХ ржмрж╛рж░рзНрждрж╛ ржЧрзГрж╣рзАржд рж╣ржпрж╝, ржХрзЗржмрж▓ржорж╛рждрзНрж░ рж╢рзЗрж╖рзЗрж░ржЯрж┐ржХрзЗржЗ ржПржЯрж┐ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ ржХрж╛рж░ржг ржПржЯрж┐ рж╣рж▓ ржмрж░рзНрждржорж╛ржи рж╕ржорзЯрзЗ ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ред ржПржЯрж┐рж░ ржЖржЧрзЗ ржерзЗржХрзЗ ржЖрж╕рж╛ ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрж░рж╛ ржирж┐рж╖рзНржкрзНрж░рзЯрзЛржЬржиред ржПржХрзНрж╖ржи `events` ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржерзЗржХрзЗ рж╕рж░рзНржмрзЗрж╢рзЗрж╖ ржорзНржпрж╛рж╕рзЗржЬ ржкрзЗрждрзЗ рж╣рж▓рзЗ ржирж┐ржЪрзЗрж░ ржХрзЛржбржЧрзБрж▓рзЛ ржпрзБржХрзНржд ржХрж░рждрзЗ рж╣ржмрзЗ:

    ```python
    event = events[-1]
    ```

1. рждрж╛рж░ржкрж░ ржирж┐ржорзНржирзЗрж░ ржХрзЛржбржЧрзБрж▓рзЛ ржпрзБржХрзНржд ржХрж░рж┐:

    ```python
    body = json.loads(event.get_body().decode('utf-8'))
    device_id = event.iothub_metadata['connection-device-id']

    logging.info(f'Received message: {body} from {device_id}')
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ ржерзЗржХрзЗ ржЖрж╕рж╛ JSON ржорзНржпрж╛рж╕рзЗржЬрзЗрж░ ржпрзЗ ржЗржнрзЗржирзНржЯ ржмржбрж┐ рж░рзЯрзЗржЫрзЗ рждрж╛ рж╕ржВржЧрзНрж░рж╣ ржХрж░рзЗред 

    рждрж╛рж░ржкрж░ ржПржЯрж┐ ржорзНржпрж╛рж╕рзЗржЬрзЗрж░ рж╕рж╛ржерзЗ ржЖрж╕рж╛ ржПржирзЛржЯрзЗрж╢ржи ржерзЗржХрзЗ ржбрж┐ржнрж╛ржЗрж╕ ржЖржЗржбрж┐ ржкрзЗрзЯрзЗ ржпрж╛рзЯред ржЗржнрзЗржирзНржЯрзЗрж░ ржмржбрж┐ рждрзЗ ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ рж╣рж┐рж╕рзЗржмрзЗ  ржЖрж╕рж╛ ржорзНржпрж╛рж╕рзЗржЬржЧрзБрж▓рзЛ, `iothub_metadata`  ржбрж┐ржХрж╢ржирж╛рж░рж┐ ржпрзЗржЯрж┐рждрзЗ ржЖржмрж╛рж░ ржкрзНрж░рзЗрж░ржХ (Sender) ржПрж░ ржбрж┐ржнрж╛ржЗрж╕ ржЖржЗржбрж┐ ржПржмржВ рж╕ржорзЯ ржЙрж▓рзНрж▓рзЗржЦрж┐ржд ржерж╛ржХрзЗред 

    рж╕ржХрж▓ рждржерзНржп рж╕ржВрж░ржХрзНрж╖рж┐ржд (logged) ржерж╛ржХрзЗред Function app ржХрзЗ рж▓рзЛржХрж╛рж▓рж┐ рж░рж╛ржи ржХрж░рж▓рзЗ ржПржЗ рж╕ржВрж░ржХрзНрж╖ржгрзЗрж░ ржмрж┐рж╖рзЯржЯрж┐ (logging) ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржжрзЗржЦрж╛ ржпрж╛ржмрзЗред

1. рждрж╛рж░ржкрж░ ржирж┐ржЪрзЗрж░ ржХрзЛржбржЧрзБрж▓рзЛ ржпрзБржХрзНржд ржХрж░рж┐:

    ```python
    soil_moisture = body['soil_moisture']

    if soil_moisture > 450:
        direct_method = CloudToDeviceMethod(method_name='relay_on', payload='{}')
    else:
        direct_method = CloudToDeviceMethod(method_name='relay_off', payload='{}')
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржорзНржпрж╛рж╕рзЗржЬ ржерзЗржХрзЗ ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ ржкрж╛ржпрж╝ред рждрж╛рж░ржкрж░ ржПржЯрж┐ ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ ржЪрзЗржХ ржХрж░рзЗ ржПржмржВ  ржЖрж░рзНржжрзНрж░рждрж╛рж░ ржорж╛ржирзЗрж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржПржХржЯрж┐  helper class рждрзИрж░рзА ржХрж░рзЗ direct method request ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп ржпрзЗржЦрж╛ржирзЗ `relay_on` ржмрж╛ `relay_off` ржХрж░рж╛ ржпрж╛ржмрзЗред ржПржЯрж┐рждрзЗ payload ржПрж░ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗ, рждрж╛ржЗ ржПржХржЯрж┐ ржлрж╛ржБржХрж╛ JSON document ржкрж╛ржарж╛ржирзЛ  ржпрж╛ржмрзЗред

1. ржирж┐ржЪрзЗрж░ ржХрзЛржб ржпрзБржХрзНржд ржХрж░рж┐:

    ```python
    logging.info(f'Sending direct method request for {direct_method.method_name} for device {device_id}')

    registry_manager_connection_string = os.environ['REGISTRY_MANAGER_CONNECTION_STRING']
    registry_manager = IoTHubRegistryManager(registry_manager_connection_string)
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ `local.settings.json` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ `REGISTRY_MANAGER_CONNECTION_STRING` ржУржкрзЗржи ржХрж░ржмрзЗред ржПржЗ ржлрж╛ржЗрж▓рзЗрж░ ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ рж╣рж┐рж╕рзЗржмрзЗ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рж╛ рж╣рзЯ ржПржмржВ ржПржЧрзБрж▓рзЛ `os.environ` ржлрж╛ржВрж╢ржи (рж╕ржХрж▓ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржбрж┐ржХрж╢ржирж╛рж░рж┐) ржжрзНржмрж╛рж░рж╛ ржмрзНржпржмрж╣рж╛рж░ржпрзЛржЧрзНржп ржХрж░рж╛ ржпрж╛рзЯ ред

    > ЁЯТБ ржПржЗ ржХрзЛржбржЯрж┐ ржХрзНрж▓рж╛ржЙржбрзЗ ржЪрж▓рждрзЗ ржерж╛ржХрж▓рзЗ,`local.settings.json` ржПрж░ ржнрзНржпрж╛рж▓рзБржЧрзБрж▓рзЛ *Application Settings* рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ ржпрж╛ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржерзЗржХрзЗ  ржмрзНржпржмрж╣рж╛рж░  ржХрж░рж╛ ржпрж╛рзЯред

    ржХрзЛржбржЯрж┐ ржкрж░рзЗ рж╕ржВржпрзЛржЧ рж╕рзНржЯрзНрж░рж┐ржВржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рж┐ ржорзНржпрж╛ржирзЗржЬрж╛рж░ рж╣рзЗрж▓рзНржкрж╛рж░ ржХрзНрж▓рж╛рж╕рзЗрж░ ржПржХржЯрж┐ ржкрж░рж┐рж╕рзНржерж┐рждрж┐ рждрзИрж░рж┐ ржХрж░рзЗред

1. ржирж┐ржорзНржирзЗрж░ ржХрзЛржб ржпрзЛржЧ ржХрж░рж┐:

    ```python
    registry_manager.invoke_device_method(device_id, direct_method)

    logging.info('Direct method request sent!')
    ```
    ржПржЗ ржХрзЛржбржЯрж┐ рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рж┐ ржорзНржпрж╛ржирзЗржЬрж╛рж░ржХрзЗ ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ ржкрзНрж░рзЗрж░ржгржХрж╛рж░рзА ржбрж┐ржнрж╛ржЗрж╕рзЗ direct method request ржкрзНрж░рзЗрж░ржг ржХрж░рж╛рж░ ржирж┐рж░рзНржжрзЗрж╢ ржжрзЗрзЯред

    > ЁЯТБ ржПржоржХрж┐ржЙржЯрж┐ржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж╛ржжрзЗрж░ ржкрзВрж░рзНржмржмрж░рзНрждрзА ржкрж╛ржаржЧрзБрж▓рж┐рждрзЗ рждрзИрж░рж┐ ржХрж░рж╛ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржиржЧрзБрж▓рж┐рж░ рж╕ржВрж╕рзНржХрж░ржгржЧрзБрж▓рж┐рждрзЗ, рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХржорж╛ржирзНржбржЧрзБрж▓рж┐ рж╕ржорж╕рзНржд ржбрж┐ржнрж╛ржЗрж╕рзЗ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрж┐рж▓ред ржХрзЛржб ржзрж░рзЗ ржирж┐ржпрж╝рзЗржЫрзЗ ржпрзЗ ржЖржорж╛ржжрзЗрж░ ржХрзЗржмрж▓ ржПржХржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ ржерж╛ржХржмрзЗред ржХрзЛржбржЯрж┐рж░ ржПржЗ рж╕ржВрж╕рзНржХрж░ржгржЯрж┐ ржХрзЛржи ржПржХржЯрж┐ржорж╛рждрзНрж░ ржбрж┐ржнрж╛ржЗрж╕рзЗ рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрзНрж░рзЗрж░ржг ржХрж░рзЗ, рждрж╛ржЗ ржЖржорж╛ржжрзЗрж░ ржпржжрж┐ ржЖрж░рзНржжрзНрж░рждрж╛ рж╕рзЗржирзНрж╕рж░ ржПржмржВ рж░рж┐рж▓рзЗ ржПрж░ ржПржХрж╛ржзрж┐ржХ рж╕рзЗржЯржЖржк ржерж╛ржХрзЗ, рждржмрзЗ ржПржЯрж┐ рж╕ржарж┐ржХ ржбрж┐ржнрж╛ржЗрж╕рзЗ рж╕ржВржпрзБржХрзНржд рж╣рзЯрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред

1. Functions app рж░рж╛ржи ржХрж░рзЗ ржПржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рждрзЗ рж╣ржмрзЗ ржпрзЗ IoT device ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржЪрзНржЫрзЗред ржЖржорж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛ржм ржпрзЗ ржорзНржпрж╛рж╕рзЗржЬржЧрзБрж▓рзЛ ржкрзНрж░рж╕рзЗрж╕ рж╣ржЪрзНржЫрзЗ ржПржмржВ ржбрж┐рж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗред рж╕рзЗржирзНрж╕рж░ржЯрж┐ ржирж╛рзЬрж╛рж▓рзЗржЗ ржЖржорж░рж╛ ржнрзНржпрж╛рж▓рзБ ржЪрзЗржЮрзНржЬ рж╣рждрзЗ ржжрзЗржЦржм ржПржмржВ рж░рж┐рж▓рзЗ рждрзЗржУ ржПржЗ ржкрж░рж┐ржмрж░рзНрждржи ржЖрж╕ржмрзЗред

> ЁЯТБ рж╕ржХрж▓ ржХрзЛржб [code/functions](code/functions) ржлрзЛрж▓рзНржбрж╛рж░рзЗ рж░рзЯрзЗржЫрзЗред

## ржХрзНрж▓рж╛ржЙржбрзЗ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХрзЛржб ржбрзЗржкрзНрж▓рзЯ ржХрж░рж╛

ржЖржорж╛ржжрзЗрж░ ржХрзЛржбржЯрж┐ ржПржЦржи рж▓рзЛржХрж╛рж▓рж┐ ржХрж╛ржЬ ржХрж░ржЫрзЗ, рждрж╛ржЗ ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржкрзЗ ржЖржорж░рж╛ ржХрзНрж▓рж╛ржЙржбрзЗ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржк рж╕рзНржерж╛ржкржи ржХрж░ржмред

### ржХрж╛ржЬ - ржХрзНрж▓рж╛ржЙржб рж░рж┐рж╕рзЛрж░рзНрж╕ рждрзИрж░рзА

ржЖржорж╛ржжрзЗрж░ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкржЯрж┐ ржХрзЗ ржПржХржЯрж┐ Azure Functions App рж░рж┐рж╕рзЛрж░рзНрж╕рзЗ ржбрзЗржкрзНрж▓рзЯ ржХрж░рждрзЗ рж╣ржмрзЗ,ржпрж╛ ржЖржорж╛ржжрзЗрж░ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗ рждрзИрж░рзА ржХрж░рж╛ рж░рж┐рж╕рзЛрж░рзНрж╕ ржЧрзНрж░рзБржкрзЗ ржерж╛ржХржмрзЗред ржПржЫрж╛рзЬрж╛ржУ ржЗржорзНржпрзБрж▓рзЗржЯрзЗржб ржПрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ ржЖржорж╛ржжрзЗрж░ ржПржХржЯрж┐ рж╕рзНржЯрзЛрж░рзЗржЬ ржПржХрж╛ржЙржирзНржЯ ржкрзНрж░рзЯрзЛржЬржиред

1. рж╕рзНржЯрзЛрж░рзЗржЬ ржПржХрж╛ржЙржирзНржЯ рждрзИрж░рзАрж░ ржЬржирзНржп ржирж┐ржорзНржирзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржжрж┐ржЗ:

    ```sh
    az storage account create --resource-group soil-moisture-sensor \
                              --sku Standard_LRS \
                              --name <storage_name> 
    ```

    ржПржЦрж╛ржирзЗ `<storage_name>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржорж╛ржжрзЗрж░ рж╕рзНржЯрзЛрж░рзЗржЬ ржПржХрж╛ржЙржирзНржЯрзЗрж░ ржирж╛ржо ржжрж┐рждрзЗ рж╣ржмрзЗред ржПржЯрж┐ ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ ржЗржЙржирж┐ржХ рж╣рждрзЗ рж╣ржмрзЗ ржХрзЗржиржирж╛ ржПржЯрж┐ URL рж╣рж┐рж╕рзЗржмрзЗржУ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред ржПржЯрж┐рж░ ржирж╛ржо рзирзк ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ рж╣рждрзЗ рж╣ржмрзЗ ржПржмржВ ржПржЦрж╛ржирзЗ ржЫрзЛржЯ рж╣рж╛рждрзЗрж░ (lower case) ржЗржВрж░рзЗржЬрж┐ ржмрж░рзНржг ржПржмржВ рж╕ржВржЦрзНржпрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржмрзЗред ржирж╛ржо рж╣рж┐рж╕рзЗржмрзЗ `sms` ржПрж░ рж╕рж╛ржерзЗ ржХрзЛржи рж╕ржВржЦрзНржпрж╛ ржмрж╛ ржирж╛ржо рж▓рзЗржЦрж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред
    
    ржПржЦрж╛ржирзЗ `--sku Standard_LRS` -ржЗ ржорзВрж▓рзНржпржорж╛ржи ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржпрж╛ ржПржХрзНрж╖рзЗрждрзНрж░рзЗ рж╕рж░рзНржмржирж┐ржорзНржи ржжрж╛ржорзЗрж░ ржЬрзЗржирж╛рж░рзЗрж▓ ржкрж╛рж░ржкрж╛рж╕ ржПржХрж╛ржЙржирзНржЯ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░ржЫрзЗред ржПржЦрж╛ржирзЗ ржХрзЛржи ржлрзНрж░рзА рж╕рж╛рж░рзНржнрж┐рж╕ ржирзЗржЗ ржПржмржВ ржЖржорж╛ржжрзЗрж░ржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржЕржирзБрж╕рж╛рж░рзЗ ржлрзА ржжрж┐рждрзЗ рж╣ржмрзЗред рждржмрзЗ ржПржЦрж╛ржирзЗ ржЦрж░ржЪ ржмрзЗрж╢ ржХржо, рж╕ржмржерзЗржХрзЗ ржжрж╛ржорж┐ рж╕рж╛рж░рзНржнрж┐рж╕ржУ рзж.рзжрзл ржорж╛рж░рзНржХрж┐ржи ржбрж▓рж╛рж░ ржкрзНрж░рждрж┐ ржорж╛рж╕рзЗ ржкрзНрж░рждрж┐ ржЧрж┐ржЧрж╛ржмрж╛ржЗржЯрзЗрж░ ржЬржирзНржпред
    
    тЬЕ ржорзВрж▓рзНржпржорж╛ржирзЗрж░ ржмрзНржпржкрж╛рж░рзЗ [Azure Storage Account pricing page](https://azure.microsoft.com/pricing/details/storage/?WT.mc_id=academic-17441-jabenn) ржерзЗржХрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржирж╛ ржпрж╛ржмрзЗред 

1. ржлрж╛ржВрж╢ржи ржПржк рждрзИрж░рзАрж░ ржЬржирзНржп ржирж┐ржорзНржирзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рж┐:

    ```sh
    az functionapp create --resource-group soil-moisture-sensor \
                          --runtime python \
                          --functions-version 3 \
                          --os-type Linux \
                          --consumption-plan-location <location> \
                          --storage-account <storage_name> \
                          --name <functions_app_name>
    ```

     `<location>` ржПрж░ рж╕рзНржерж▓рзЗ ржЖржЧрзЗрж░ рж▓рзЗрж╕ржирзЗ рж░рж┐рж╕рзЛрж░рзНрж╕ ржЧрзНрж░рзБржк рждрзИрж░рзАрж░ рж╕ржорзЯ ржпрзЗ рж▓рзЛржХрзЗрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрж┐, рждрж╛ ржжрж┐рждрзЗ рж╣ржмрзЗред 

    ржПржЫрж╛рзЬрж╛ржУ `<storage_name>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржЧрзЗрж░ ржЕржВрж╢рзЗ ржмрзНржпржмрж╣рзГржд ржирж╛ржоржЯрж┐ржЗ ржжрж┐рждрзЗ рж╣ржмрзЗред 

    рждрж╛рж░ржкрж░ `<functions_app_name>` ржПржУ ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржирж╛ржо ржжрж┐рждрзЗ рж╣ржмрзЗред ржПржЯрж┐ ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ ржЗржЙржирж┐ржХ рж╣рждрзЗ рж╣ржмрзЗ ржХрзЗржиржирж╛ ржлрж╛ржВрж╢ржи ржПржк ржПржХрж╕рзЗрж╕ ржХрж░рж╛рж░ ржЬржирзНржп URL ржП ржПржЯрж┐ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред  ржПржЦрж╛ржирзЗ `soil-moisture-sensor-` ржмрж╛ ржПржЗ ржзрж░ржгрзЗрж░ ржХрж┐ржЫрзБрж░ ржкрж░рзЗ ржХрзЛржи рж╢ржмрзНржж ржмрж╛ ржирж╛ржо ржжрзЗрзЯрж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

    ржПржЦрж╛ржирзЗ `--functions-version 3` ржПржЗ ржЕржкрж╢ржиржЯрж┐ ржмрзНржпржмрж╣рж╛рж░рзНржп Azure Functions ржПрж░ ржнрж╛рж░рзНрж╕ржи ржарж┐ржХ ржХрж░рзЗред ржнрж╛рж░рзНрж╕ржи-рзй ржЗ рж╣рж▓рзЛ рж╕рж░рзНржмрж╢рзЗрж╖ рж╕ржВрж╕рзНржХрж░ржгред 

    ржЖрж░ `--os-type Linux` Functions runtime ржХрзЗ ржПржЗ ржлрж╛ржВрж╢ржиржЧрзБрж▓рзЛ рж╣рзЛрж╕рзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп OS рж╣рж┐рж╕рзЗржмрзЗ Linux ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржирж┐рж░рзНржжрзЗрж╢ ржжрзЗрзЯред Function ржЧрзБрж▓рзЛ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорж┐ржВ ржнрж╛рж╖рж╛рж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ, Linux ржмрж╛ Windows ржП рж╣рзЛрж╕рзНржЯ ржХрж░рж╛ ржпрж╛ржмрзЗред ржкрж╛ржЗржержи ржнрж╛рж╖рж╛рж░ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╣рж▓рзЗ, рждрж╛ ржХрзЗржмрж▓ Linux ржПржЗ рж░рж╛ржи ржХрж░ржмрзЗред 

### ржХрж╛ржЬ - Application settings ржЖржкрж▓рзЛржб ржХрж░рж╛

ржпржЦржи ржЖржорж░рж╛ ржлрж╛ржВрж╢ржи ржПржк ржЧрзБрж▓рзЛ рждрзИрж░рзА ржХрж░рж┐, рждржЦржи `local.settings.json` ржлрж╛ржЗрж▓рзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржЯрзНрж░рж┐ржВрзЯрзЗрж░ ржЬржирзНржп ржХрж┐ржЫрзБ рж╕рзЗржЯрж┐ржВрж╕ рж╕рзНржЯрзЛрж░ рж╣рзЯред ржПржЗ рж╕рзЗржЯрж┐ржВрж╕ ржЧрзБрж▓рзЛ Azure ржП ржлрж╛ржВрж╢ржи ржПржк ржПрж░ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЯрж┐ржВ ржПржУ ржЖрж╕рждрзЗ рж╣ржмрзЗ ржпрж╛рждрзЗ ржЖржорж╛ржжрзЗрж░ ржХрзЛржб рждрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗред 

> ЁЯОУ  `local.settings.json` ржлрж╛ржЗрж▓ржЯрж┐ ржХрзЗржмрж▓ рж▓рзЛржХрж╛рж▓ ржбрзЗржнрж▓рж╛ржкржорзЗржирзНржЯ рж╕рзЗржЯрж┐ржВрж╕ ржПрж░ ржЬржирзНржп ржпрж╛ рж╕рзЛрж░рзНрж╕ ржХрзЛржб ржХржирзНржЯрзНрж░рзЛрж▓рзЗржУ ржЪрзЗржХ ржХрж░рж╛ рж╣рзЯржирж╛ред ржпржЦржи ржЖржорж░рж╛ ржкрзБрж░рзЛ ржХрж╛рж░рзНржпржХрзНрж░ржо ржХрзНрж▓рж╛ржЙржбрзЗ ржЖржирж┐, рждржЦржи ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЯрж┐ржВрж╕ржЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржПржЧрзБрж▓рзЛ ржХрзА/ржнрзНржпрж╛рж▓рзБ ржкрзЗрзЯрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржХрзНрж▓рж╛ржЙржбрзЗ ржерж╛ржХрзЗ ржпрж╛ ржПржиржнрж╛рзЯрж░ржиржорзЗржирзНржЯ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ ржерзЗржХрзЗржУ ржЧрзНрж░рж╣ржг ржХрж░рж╛ ржпрж╛рзЯ ржХрзЛржбрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЕржержмрж╛ рж░рж╛ржиржЯрж╛ржЗржорзЗ ржпржЦржи ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣рзЯ,рждржЦржиред

1. ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рзЗ, `IOT_HUB_CONNECTION_STRING` рж╕рзЗржЯрж┐ржВрж╕ржЯрж┐ ржлрж╛ржВрж╢ржи ржПржк ржПрж░ ржПржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЯрж┐ржВ ржП ржарж┐ржХ ржХрж░рж┐:

    ```sh
    az functionapp config appsettings set --resource-group soil-moisture-sensor \
                                          --name <functions_app_name> \
                                          --settings "IOT_HUB_CONNECTION_STRING=<connection string>"
    ```

    ржПржХрзНрж╖рзЗрждрзНрж░рзЗ `<functions_app_name>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржорж╛ржжрзЗрж░ ржмрзНржпржмрж╣рзГржд ржирж╛ржоржЯрж┐ ржжрж┐рждрзЗ рж╣ржмрзЗред 

    ржЖрж░ `<connection string>` ржПрж░ рж╕рзНржерж▓рж╛ржнрж┐рж╖рж┐ржХрзНржд рж╣ржмрзЗ `IOT_HUB_CONNECTION_STRING` ржПрж░ ржнрзНржпрж╛рж▓рзБ ржпрж╛ ржЖржорж░рж╛ `local.settings.json` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржкрж╛ржмред 

1. ржкрзВрж░рзНржмржмрж░рзНрждрзА ржзрж╛ржкржЯрж┐ ржкрзБржирж░рж╛рзЯ ржХрж░рж┐, рждржмрзЗ `REGISTRY_MANAGER_CONNECTION_STRING` ржнрзНржпрж╛рж▓рзБ рж╕рзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗ `local.settings.json` ржлрж╛ржЗрж▓рзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗред 

ржЖржорж░рж╛ ржпржЦржи ржПржЗ ржЖржжрзЗрж╢ржЧрзБрж▓рж┐ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж┐, рждржЦржи ржПржЧрзБрж▓рзЛ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржирзЗрж░ ржЬржирзНржп рж╕ржорж╕рзНржд ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи рж╕рзЗржЯрж┐ржВрж╕рзЗрж░ ржПржХржЯрж┐ рждрж╛рж▓рж┐ржХрж╛ ржЖржЙржЯржкрзБржЯ рж╣рж┐рж╕рзЗржмрзЗ ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗред ржЖржорж╛ржжрзЗрж░ ржорж╛ржиржЧрзБрж▓рж┐ рж╕ржарж┐ржХржнрж╛ржмрзЗ рж╕рзЗржЯ ржХрж░рж╛ ржЖржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рждрзЗ ржЖржорж░рж╛ ржПржЗ рж╕рзБржмрж┐ржзрж╛ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрж╛рждрзЗ ржкрж╛рж░рж┐ред

> ЁЯТБ ржЖржорж░рж╛ `AzureWebJobsStorage` рждрзЗ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржнрзНржпрж╛рж▓рзБ рж╕рзЗржЯ ржХрж░рж╛ ржжрзЗржЦржмрзЛред ржПржХрзНрж╖рзЗрждрзНрж░рзЗ `local.settings.json` ржлрж╛ржЗрж▓рзЗ ржпрж╛ рж▓рзЛржХрж╛рж▓  рж╕рзНржЯрзЛрж░рзЗржЬ ржЗржорзНржпрзБрж▓рзЗржЯрж░ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржЬржирзНржп рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред ржЖржорж░рж╛ ржпржЦржи ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржк рждрзИрж░рзА ржХрж░рж┐, рждржЦржи ржПржЗ рж╕рзНржЯрзЛрж░рзЗржЬ ржПржХрж╛ржЙржирзНржЯржЯрж┐ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛рж╕ ржХрж░рж╛ рж╣рзЯ ржпрж╛ ржЕржЯрзЛржорзЗржЯрж┐ржХрзНржпрж╛рж▓рж┐ рж╕рзЗржЯрж┐ржВрж╕ ржП ржЪрж▓рзЗ ржЖрж╕рзЗред

### ржХрж╛ржЬ - ржХрзНрж▓рж╛ржЙржбрзЗ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржк ржбрзЗржкрзНрж▓рзЯ ржХрж░рж╛

ржПржЦржи ржпрзЗрж╣рзЗрждрзБ ржЖржорж╛ржжрзЗрж░ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржк рж░рзЗржбрж┐ рж░рзЯрзЗржЫрзЗ, ржЖржорж░рж╛ рждрж╛ ржХрзНрж▓рж╛ржЙржбрзЗ ржбрзЗржкрзНрж▓рзЯ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

1. VS Code terminal ржП ржирзАржЪрзЗрж░ ржХржорж╛ржирзНржб рж░рж╛ржи ржХрж░рзЗ Functions App ржкрж╛ржмрж▓рж┐рж╢ ржХрж░рж┐:

    ```sh
    func azure functionapp publish <functions_app_name>
    ```

    ржПржХрзНрж╖рзЗрждрзНрж░рзЗ `<functions_app_name>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржорж╛ржжрзЗрж░ ржмрзНржпржмрж╣рзГржд ржирж╛ржоржЯрж┐ ржжрж┐рждрзЗ рж╣ржмрзЗред

ржХрзЛржбржЯрж┐ ржкрзНржпрж╛ржХрзЗржЬ ржЖржХрж╛рж░рзЗ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзЗ ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржмрзЗ, ржпрзЗржЦрж╛ржирзЗ ржПржЯрж┐ ржбрзЗржкрзНрж▓рзЯ ржПржмржВ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╢рзБрж░рзБ ржХрж░рж╛ рж╣ржмрзЗред ржкрзНрж░ржЪрзБрж░ ржХржирж╕рзЛрж▓ ржЖржЙржЯржкрзБржЯ ржерж╛ржХржмрзЗ, ржПржЯрж┐рж░ ржбрзЗржкрзНрж▓рзЯржорзЗржирзНржЯрзЗрж░ ржирж┐рж╢рзНржЪржпрж╝рждрж╛ ржПржмржВ ржХрзНрж░рж┐ржпрж╝рж╛ржХрж▓рж╛ржкржЧрзБрж▓рж┐рж░ ржПржХржЯрж┐ рждрж╛рж▓рж┐ржХрж╛ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред рждржмрзЗ ржПржХрзНрж╖рзЗрждрзНрж░рзЗ рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржХрзЗржмрж▓ ржЯрзНрж░рж┐ржЧрж╛рж░ ржерж╛ржХржмрзЗред

```output
Deployment successful.
Remote build succeeded!
Syncing triggers...
Functions in soil-moisture-sensor:
    iot-hub-trigger - [eventHubTrigger]
```

ржЖржорж╛ржжрзЗрж░ ржЖржЗржУржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ржЯрж┐ ржЪрж▓ржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржЖржЧрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж┐ ред рж╕рзЗржирзНрж╕рж░ржЯрж┐ржХрзЗ ржмрж╛рж░ржмрж╛рж░ ржорж╛ржЯрж┐рж░ ржЕржнрзНржпржирзНрждрж░рзЗ ржПржмржВ ржмрж╛ржЗрж░рзЗ рж╕рж░рж┐ржпрж╝рзЗ ржЖрж░рзНржжрзНрж░рждрж╛рж░ рж╕рзНрждрж░ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж┐ред ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржЖржорж░рж╛ рж░рж┐рж▓рзЗржЯрж┐ ржЪрж╛рж▓рзБ ржПржмржВ ржмржирзНржз рж╣рждрзЗ ржжрзЗржЦржмрзЛред

---

## ЁЯЪА ржЪрзНржпрж╛рж▓рзЗржЮрзНржЬ

ржкрзВрж░рзНржмржмрж░рзНрждрзА ржкрж╛ржарзЗ, рж░рж┐рж▓рзЗ ржЪрж╛рж▓рзБ ржерж╛ржХрж╛ ржЕржмрж╕рзНржерж╛ржпрж╝ ржПржмржВ ржПржЯрж┐ ржмржирзНржз рж╣ржУржпрж╝рж╛рж░ ржкрж░рзЗ ржЕрж▓рзНржк рж╕ржоржпрж╝рзЗрж░ ржЬржирзНржп -  ржЖржорж░рж╛ ржПржоржХрж┐ржЙржЯрж┐ржЯрж┐ ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐ ржерзЗржХрзЗ ржЖржирж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рзЗ рж░рж┐рж▓рзЗ ржПрж░ рж╕ржоржпрж╝ ржорзНржпрж╛ржирзЗржЬ ржХрж░рзЗржЫрж┐рж▓рж╛ржо ред ржЖржорж░рж╛ ржПржЗ ржкржжрзНржзрждрж┐ржЯрж┐ ржПржЦрж╛ржирзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржм ржирж╛ - ржЖржЗржУржЯрж┐ рж╣рж╛ржм ржЯрзНрж░рж┐ржЧрж╛рж░ ржЖржорж░рж╛ ржЖржи-рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рждрзЗ ржкрж╛рж░ржм ржирж╛ред

ржЖржорж╛ржжрзЗрж░ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкрзЗ ржПржЗ рж╕ржорж╕рзНржпрж╛ ржорзЛржХрж╛ржмрзЗрж▓рж╛ ржХрж░рждрзЗ ржмрж┐ржнрж┐ржирзНржи ржЙржкрж╛ржпрж╝ рж╕ржорзНржкрж░рзНржХрзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рж┐ред

## рж▓рзЗржХржЪрж╛рж░ ржкрж░ржмрж░рзНрждрзА ржХрзБржЗржЬ

[рж▓рзЗржХржЪрж╛рж░ ржкрж░ржмрж░рзНрждрзА ржХрзБржЗржЬ](https://brave-island-0b7c7f50f.azurestaticapps.net/quiz/18)

## рж░рж┐ржнрж┐ржЙ ржПржмржВ рж╕рзНржм-ржЕржзрзНржпрзЯржи

* рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХржорзНржкрж┐ржЙржЯрж┐ржВ  ржирж┐рзЯрзЗ [Serverless Computing page on Wikipedia](https://wikipedia.org/wiki/Serverless_computing) ржерзЗржХрзЗ ржЖрж░рзЛ ржЬрж╛ржирж╛ ржпрж╛ржмрзЗред
* ржЙржжрж╛рж╣рж░ржгрж╕рж╣  рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржирж┐рзЯрзЗ ржЖрж░рзЛ  ржЬрж╛ржирж╛ ржпрж╛ржмрзЗ [Go serverless for your IoT needs Azure blog post](https://azure.microsoft.com/blog/go-serverless-for-your-iot-needs/?WT.mc_id=academic-17441-jabenn) ржерзЗржХрзЗред
* Azure Functions ржирж┐рзЯрзЗ [Azure Functions YouTube channel](https://www.youtube.com/c/AzureFunctions) ржерзЗржХрзЗ ржЖрж░рзЛ ржЬрж╛ржирж╛ ржпрж╛ржмрзЗред

## ржПрж╕рж╛ржЗржиржорзЗржирзНржЯ

[ржорзНржпрж╛ржирзБрзЯрж╛рж▓ рж░рж┐рж▓рзЗ ржХржирзНржЯрзНрж░рзЛрж▓ рж╕ржВржпрзЛржЬржи](assignment.bn.md)
