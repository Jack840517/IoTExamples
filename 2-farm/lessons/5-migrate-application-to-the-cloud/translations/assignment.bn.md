# ржорзНржпрж╛ржирзБрзЯрж╛рж▓ рж░рж┐рж▓рзЗ ржХржирзНржЯрзНрж░рзЛрж▓ рж╕ржВржпрзЛржЬржи

## ржирж┐рж░рзНржжрзЗрж╢рж╛ржмрж▓рж┐

ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐ ржЕржирзБрж░рзЛржз рж╕рж╣ ржЕржирзЗржХржЧрзБрж▓рж┐ ржнрж┐ржирзНржи ржЙржкрж╛рзЯрзЗ рж╕рж╛рж░рзНржнрж╛рж░рж▓рзЗрж╕ ржХрзЛржбржХрзЗ ржЯрзНрж░рж┐ржЧрж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ред рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ ржУржнрж╛рж░рж░рж╛ржЗржб ржпрзБржХрзНржд ржХрж░рждрзЗ ржЖржорж░рж╛ HTTP ржЯрзНрж░рж┐ржЧрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐, ржХрж╛ржЙржХрзЗ ржУржпрж╝рзЗржм рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржжрзНржмрж╛рж░рж╛ рж░рж┐рж▓рзЗ ржЪрж╛рж▓рзБ ржмрж╛ ржмржирзНржз ржХрж░рж╛рж░ рж╕рзБржпрзЛржЧ ржжрж┐рждрзЗред

ржПржЗ ржПрж╕рж╛ржЗржиржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп, рж░рж┐рж▓рзЗ ржЪрж╛рж▓рзБ ржПржмржВ ржмржирзНржз ржХрж░рждрзЗ ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкржЯрж┐рждрзЗ ржжрзБржЯрж┐ ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ ржпрзБржХрзНржд ржХрж░рждрзЗ рж╣ржмрзЗред ржбрж┐ржнрж╛ржЗрж╕рзЗ ржХржорж╛ржирзНржб ржкрзНрж░рзЗрж░ржгрзЗрж░ ржЬржирзНржп ржЖржорж░рж╛ ржПржЗ ржкрж╛ржаржЯрж┐ ржерзЗржХрзЗ ржпрж╛ рж╢рж┐ржЦрзЗржЫрж┐ рждрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЗ ржПржЯрж┐ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЛред

ржХрж┐ржЫрзБ рж╣рж┐ржирзНржЯрж╕:

* ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржбржЯрж┐ рж╕рж╣ ржЖржорж╛ржжрзЗрж░ ржмрж┐ржжрзНржпржорж╛ржи ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржкржЧрзБрж▓рж┐рждрзЗ ржПржХржЯрж┐ HTTP ржЯрзНрж░рж┐ржЧрж╛рж░ ржпрзБржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░рж┐:

    ```sh
    func new --name <trigger name> --template "HTTP trigger"
    ```

    ржПржЦрж╛ржирзЗ `<trigger name>` ржПрж░ ржЬрж╛рзЯржЧрж╛рзЯ ржЖржорж╛ржжрзЗрж░ ржмрзНржпржмрж╣рзГржд ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░рзЗрж░ ржирж╛ржо ржжрж┐рждрзЗ рж╣ржмрзЗред ржПржЦрж╛ржирзЗ `relay_on` ржПржмржВ `relay_off` ржПрж░ ржорждрзЛ ржирж╛ржо ржжрзЗрзЯрж╛ ржпрж╛рзЯред

* HTTP trigger ржП ржПржХрж╕рзЗрж╕ ржХржирзНржЯрзНрж░рзЛрж▓ ржжрзЗрзЯрж╛ ржпрж╛рзЯред ржПржЧрзБрж▓рзЛ рж░рж╛ржи ржХрж░рж╛рж░ ржЬржирзНржп function-specific API key ржжрж░ржХрж╛рж░ ржпрж╛ URL ржПрж░ рж╕рж╛ржерзЗ ржкрж╛рж╕ ржХрж░рждрзЗ рж╣ржмрзЗред рждржмрзЗ ржПржЗ ржПрж╕рж╛ржЗржиржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп ржПржЗ рж░рзЗрж╕рзНржЯрзНрж░рж┐ржХрж╢ржи рж░рж┐ржорзБржн ржХрж░рзЗ ржжрзЗрзЯрж╛ ржпрж╛рзЯ ржпрж╛рждрзЗ ржпрзЗ ржХрзЗржЙржЗ ржПржЗ ржлрж╛ржВрж╢ржи рж░рж╛ржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред ржПржЬржирзНржп `authLevel` рж╕рзЗржЯрж┐ржВрж╕ржЯрж┐ ржЖржкржбрзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗ `function.json` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ :

    ```json
    "authLevel": "anonymous"
    ```

    > ЁЯТБ ржПржХрж╕рзЗрж╕ ржХржирзНржЯрзНрж░рзЛрж▓ ржирж┐рзЯрзЗ ржЖрж░рзЛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд [Function access keys documentation](https://docs.microsoft.com/azure/azure-functions/functions-bindings-http-webhook-trigger?WT.mc_id=academic-17441-jabenn#authorization-keys) ржерзЗржХрзЗ ржЬрж╛ржирж╛ ржпрж╛ржмрзЗред

* HTTP ржЯрзНрж░рж┐ржЧрж╛рж░ржЧрзБрж▓рзЛ ржмрж╛ржЗ ржбрж┐ржлрж▓рзНржЯ GET ржПржмржВ POST рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯржЧрзБрж▓рзЛ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рзЗред ржЕрж░рзНржерж╛рзО ржУрзЯрзЗржм ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржжрзНржмрж╛рж░рж╛ржЗ ржХрж╛ржЬ ржХрж░рж╛ ржпрж╛ржмрзЗ - GET рж░рж┐ржХрзБрзЯрзЗрж╕рзНржЯ ржжрж┐рзЯрзЗред

    рж▓рзЛржХрж╛рж▓рж┐ ржлрж╛ржВрж╢ржи ржПржк рж░рж╛ржи ржХрж░рж▓рзЗ, ржЯрзНрж░рж┐ржЧрж╛рж░ ржЗржЙржЖрж░ржПрж▓ ржкрж╛ржУрзЯрж╛ ржпрж╛ржмрзЗ:

    ```output
    Functions:

        relay_off: [GET,POST] http://localhost:7071/api/relay_off

        relay_on: [GET,POST] http://localhost:7071/api/relay_on

        iot-hub-trigger: eventHubTrigger
    ```

    ржЗржЙржЖрж░ржПрж▓ ржЯрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржкрзЗрж╕рзНржЯ ржХрж░рзЗ `return` ржП ржкрзНрж░рзЗрж╕ ржХрж░рждрзЗ рж╣ржмрзЗ ржЕржержмрж╛ VS Code ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ рж▓рж┐ржВржХржЯрж┐ `Ctrl+click` (`Cmd+click` macOS ржПрж░ ржЬржирзНржп) рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗ ржбрж┐ржлрж▓рзНржЯ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ  рждрж╛ ржУржкрзЗржи рж╣ржмрзЗ ржПржмржВ ржЯрзНрж░рж┐ржЧрж╛рж░ рж░рж╛ржи ржХрж░ржмрзЗред

    > ЁЯТБ ржЦрзЗрзЯрж╛рж▓ ржХрж░рж╛ ржжрж░ржХрж╛рж░ ржпрзЗ URL-ржЯрж┐ рждрзЗ `/api` рж░рзЯрзЗржЫрзЗ - HTTP ржЯрзНрж░рж┐ржЧрж╛рж░ржЧрзБрж▓рзЛ ржмрж╛ржЗ ржбрж┐ржлрж▓рзНржЯ `api` рж╕рж╛ржмржбрзЛржорзЗржЗржирзЗ ржерж╛ржХрзЗред

* ржлрж╛ржВрж╢ржи ржЕрзНржпрж╛ржк ржбрзЗржкрзНрж▓рзЯ ржХрж░рж▓рзЗ, рждржЦржи ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ URL рж╣ржмрзЗ:

    `https://<functions app name>.azurewebsites.net/api/<trigger name>`

    ржпрзЗржЦрж╛ржирзЗ `<functions app name>` рж╣рж▓рзЛ  ржЖржорж╛ржжрзЗрж░ ржлрж╛ржВрж╢ржи ржПржк ржПрж░  ржирж╛ржо ржПржмржВ  `<trigger name>` рж╣рж▓рзЛ ржЯрзНрж░рж┐ржЧрж╛рж░рзЗрж░ ржирж╛ржоред

## ржПрж╕рж╛ржЗржиржорзЗржирзНржЯ ржорзВрж▓рзНржпрж╛рзЯржи ржорж╛ржиржжржирзНржб

| ржХрзНрж░рж╛ржЗржЯрзЗрж░рж┐рзЯрж╛ | ржжрзГрж╖рзНржЯрж╛ржирзНрждржорзВрж▓ржХ (рж╕рж░рзНржмрзЛрждрзНрждржо) | ржкрж░рзНржпрж╛ржкрзНржд (ржорж╛ржЭрж╛рж░рж┐) | ржЙржирзНржирждрж┐ ржкрзНрж░ржпрж╝рзЛржЬржи (ржирж┐ржорзНржиржорж╛ржи) |
| --------- | ------------------ | ------------- | --------------------- |
|  HTTP ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рзА | рж╕ржарж┐ржХ ржирж╛ржоржХрж░ржгрзЗрж░ ржорж╛ржзрзНржпржорзЗ рзиржЯрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рж┐ ржХрж░рзЗ рж░рж┐рж▓рзЗ ржЕржи/ржЕржл ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ | рж╕ржарж┐ржХ ржирж╛ржоржХрж░ржгрзЗрж░ ржорж╛ржзрзНржпржорзЗ рззржЯрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗ | ржХрзЛржи ржЯрзНрж░рж┐ржЧрж╛рж░ рждрзИрж░рзА ржХрж░рждрзЗ рж╕ржорж░рзНрже рж╣рзЯржирж┐ |
| ржПржЗржЪржЯрж┐ржЯрж┐ржкрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ржЧрзБрж▓рж┐ ржерзЗржХрзЗ рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рж╛ | ржЙржнржпрж╝ ржЯрзНрж░рж┐ржЧрж╛рж░ржХрзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рждрзЗ ржПржмржВ ржпржерзЛржкржпрзБржХрзНрждржнрж╛ржмрзЗ рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рждрзЗ рж╕ржХрзНрж╖ржо рж╣ржпрж╝рзЗржЫрж┐рж▓| ржХрзЗржмрж▓ рззржЯрж┐ ржЯрзНрж░рж┐ржЧрж╛рж░ржХрзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рждрзЗ ржПржмржВ ржпржерзЛржкржпрзБржХрзНрждржнрж╛ржмрзЗ рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рждрзЗ рж╕ржХрзНрж╖ржо рж╣ржпрж╝рзЗржЫрж┐рж▓ | ржЯрзНрж░рж┐ржЧрж╛рж░ржХрзЗ ржЖржЗржУржЯрж┐ рж╣рж╛ржмрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рждрзЗ рж╕ржорж░рзНрже рж╣рзЯржирж┐ |
