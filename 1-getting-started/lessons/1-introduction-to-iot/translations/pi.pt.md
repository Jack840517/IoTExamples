# Raspberry Pi

O [Raspberry Pi](https://raspberrypi.org) √© um computador de placa √∫nica. Voc√™ pode adicionar sensores e atuadores usando uma ampla variedade de dispositivos e ecossistemas, e para essas li√ß√µes, usando um ecossistema de hardware chamado [Grove](https://www.seeedstudio.com/category/Grove-c-1003.html). Voc√™ codificar√° seu Pi e acessar√° os sensores Grove usando Python.

![Um Raspberry Pi 4](../../../../images/raspberry-pi-4.jpg)

## Configura√ß√£o

Se voc√™ estiver usando um Raspberry Pi como seu hardware IoT, voc√™ tem duas op√ß√µes - voc√™ pode trabalhar em todas essas li√ß√µes e codificar diretamente no Pi ou pode se conectar remotamente a um Pi 'headless' e codificar de seu computador.

Antes de come√ßar, voc√™ tamb√©m precisa conectar o Grove Base Hat ao seu Pi.

### Tarefa - configura√ß√£o

Instale o Grove Base Hat no seu Pi e configure o Pi

1. Conecte o Grove Base Hat ao seu Pi. O soquete no Grove Base Hat se encaixa em todos os pinos de GPIO no Pi, deslizando para baixo sobre os pinos para que se assente firmemente na base. Ele fica sobre o Pi, cobrindo-o.

    ![Ajustando o Grove Hat](../../../../images/pi-grove-hat-fitting.gif)

1. Decida como voc√™ deseja programar seu Pi e v√° para a se√ß√£o relevante abaixo:

    * [Trabalhe diretamente no seu Pi](#trabalhe-diretamente-no-seu-pi)
    * [Acesso remoto para codificar o Pi](#acesso-remoto-para-codificar-o-pi)

### Trabalhe diretamente no seu Pi

Se voc√™ quiser trabalhar diretamente no seu Pi, pode usar a vers√£o desktop do Raspberry Pi OS e instalar todas as ferramentas de que precisa.

#### Tarefa - trabalhe diretamente no seu Pi

Configure seu Pi para desenvolvimento.

1. Siga as instru√ß√µes no [guia de configura√ß√£o do Raspberry Pi](https://projects.raspberrypi.org/en/projects/raspberry-pi-setting-up) para configurar seu Pi, conecte-o a um teclado/mouse/monitor, conecte-o √† sua rede WiFi ou ethernet e atualize o software. O sistema operacional que voc√™ deseja instalar √© o **Raspberry Pi OS (32 bits)**, ele √© marcado como o sistema operacional recomendado ao usar o Raspberry Pi Imager para criar a imagem do seu cart√£o SD.

Para programar o Pi usando os sensores e atuadores Grove, voc√™ precisar√° instalar um editor para permitir que voc√™ escreva o c√≥digo do dispositivo e v√°rias bibliotecas e ferramentas que interagem com o hardware Grove.

1. Assim que seu Pi for reiniciado, inicie o Terminal clicando no √≠cone **Terminal** na barra de menu superior ou escolha *Menu -> Acess√≥rios -> Terminal*

1. Execute o seguinte comando para garantir que o sistema operacional e o software instalado estejam atualizados:

    ```sh
    sudo apt update && sudo apt full-upgrade --yes
    ```

1. Execute o seguinte comando para instalar todas as bibliotecas necess√°rias para o hardware Grove:

    ```sh
    curl -sL https://github.com/Seeed-Studio/grove.py/raw/master/install.sh | sudo bash -s -
    ```

    Um dos recursos poderosos do Python √© a capacidade de instalar [pacotes pip](https://pypi.org) - s√£o pacotes de c√≥digo escritos por outras pessoas e publicados na Internet. Voc√™ pode instalar um pacote pip em seu computador com um comando e, em seguida, usar esse pacote em seu c√≥digo. Este script de instala√ß√£o do Grove instalar√° os pacotes pip que voc√™ usar√° para trabalhar com o hardware Grove a partir do Python.

1. Reinicialize o Pi usando o menu ou executando o seguinte comando no Terminal:

    ```sh
    sudo reboot
    ```

1. Ap√≥s a reinicializa√ß√£o do Pi, reinicie o Terminal e execute o seguinte comando para instalar o [Visual Studio Code (VS Code)](https://code.visualstudio.com?WT.mc_id=academic-17441-jabenn) - este √© o editor que voc√™ usar√° para escrever o c√≥digo do seu dispositivo em Python.

    ```sh
    sudo apt install code
    ```

    Depois de instalado, o VS Code estar√° dispon√≠vel no menu superior.

    > üíÅ Voc√™ est√° livre para usar qualquer IDE de Python ou editor para essas li√ß√µes se tiver uma ferramenta preferida, mas as li√ß√µes dar√£o instru√ß√µes baseadas no uso do VS Code.

1. Instale o Pylance. Esta √© uma extens√£o para VS Code que fornece suporte √† linguagem Python. Consulte a [documenta√ß√£o da extens√£o Pylance](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-python.vscode-pylance) para obter instru√ß√µes sobre como instalar esta extens√£o no VS Code.

### Acesso remoto para codificar o Pi

Em vez de codificar diretamente no Pi, ele pode rodar 'headless', quando n√£o est√° conectado a um teclado/mouse/monitor, e assim configurar e codificar nele a partir do seu computador, usando o Visual Studio Code.

#### Configure o Pi OS

Para codificar remotamente, o Pi OS precisa ser instalado em um cart√£o SD.

##### Tarefa - configurar o Pi OS

Configure o Pi OS headless.

1. Baixe o **Raspberry Pi Imager** da [p√°gina do software Raspberry Pi OS](https://www.raspberrypi.org/software/) e instale-o

1. Insira um cart√£o SD em seu computador, usando um adaptador, se necess√°rio

1. Inicie o Raspberry Pi Imager

1. No Raspberry Pi Imager, selecione o bot√£o **CHOOSE OS** e, em seguida, selecione *Raspberry Pi OS (Other)*, seguido por *Raspberry Pi OS Lite (32 bits)*

    ![O Raspberry Pi Imager com o Raspberry Pi OS Lite selecionado](../../../../images/raspberry-pi-imager.png)

    > üíÅ Raspberry Pi OS Lite √© uma vers√£o do Raspberry Pi OS que n√£o possui a UI para desktop ou ferramentas baseadas em UI. Eles n√£o s√£o necess√°rios para um Pi headless e tornam a instala√ß√£o menor e o tempo de inicializa√ß√£o mais r√°pido.

1. Selecione o bot√£o **CHOOSE STORAGE** e, em seguida, selecione seu cart√£o SD

1. Inicie as **Advanced Options** pressionando `Ctrl+Shift+X`. Essas op√ß√µes permitem alguma pr√©-configura√ß√£o do sistema operacional do Raspberry Pi antes que sua imagem seja criada no cart√£o SD.

    1. Marque a caixa de sele√ß√£o **Enable SSH** e defina uma senha para o usu√°rio `pi`. Esta √© a senha que voc√™ usar√° para fazer login no Pi mais tarde.

    1. Se voc√™ est√° planejando se conectar ao Pi por WiFi, marque a caixa de sele√ß√£o **Configure WiFi** e insira o SSID e a senha do seu WiFi, bem como selecione o pa√≠s do seu WiFi. Voc√™ n√£o precisa fazer isso se for usar um cabo Ethernet. Certifique-se de que a rede √† qual voc√™ se conecta √© a mesma em que seu computador est√°.

    1. Marque a caixa de sele√ß√£o **Set locale settings** e defina seu pa√≠s e fuso hor√°rio

    1. Selecione o bot√£o **SAVE**

1. Selecione o bot√£o **WRITE** para gravar o sistema operacional no cart√£o SD. Se estiver usando o macOS, ser√° solicitado que voc√™ insira sua senha, pois a ferramenta subjacente que grava imagens de disco precisa de acesso privilegiado.

O sistema operacional ser√° gravado no cart√£o SD e, uma vez conclu√≠do, o cart√£o ser√° ejetado pelo sistema operacional e voc√™ ser√° notificado. Remova o cart√£o SD do seu computador, insira-o no Pi e ligue o Pi.

#### Conecte-se ao Pi

A pr√≥xima etapa √© acessar remotamente o Pi. Voc√™ pode fazer isso usando `ssh`, que est√° dispon√≠vel no macOS, Linux e vers√µes recentes do Windows.

##### Tarefa - conectar ao Pi

Acesse remotamente o Pi.

1. Inicie um Terminal ou Prompt de Comando e digite o seguinte comando para se conectar ao Pi:

    ```sh
    ssh pi@raspberrypi.local
    ```

    Se voc√™ estiver no Windows usando uma vers√£o mais antiga que n√£o possui o `ssh` instalado, voc√™ pode usar o OpenSSH. Voc√™ pode encontrar as instru√ß√µes de instala√ß√£o na [documenta√ß√£o de instala√ß√£o do OpenSSH](https://docs.microsoft.com//windows-server/administration/openssh/openssh_install_firstuse?WT.mc_id=academic-17441-jabenn).

1. Isso deve se conectar ao seu Pi e pedir a senha.

    Ser capaz de encontrar computadores em sua rede usando `<hostname>.local` √© uma adi√ß√£o bastante recente ao Linux e Windows. Se voc√™ estiver usando Linux ou Windows e receber algum erro sobre o nome do host n√£o ser encontrado, ser√° necess√°rio instalar software adicional para habilitar o ZeroConf networking (tamb√©m conhecido pela Apple como Bonjour):

    1. Se voc√™ estiver usando Linux, instale o Avahi usando o seguinte comando:

        ```sh
        sudo apt-get install avahi-daemon
        ```

    1. Se voc√™ estiver usando o Windows, a maneira mais f√°cil de ativar o ZeroConf √© instalar [Bonjour Print Services para Windows](http://support.apple.com/kb/DL999). Voc√™ tamb√©m pode instalar o [iTunes para Windows](https://www.apple.com/itunes/download/) para obter uma vers√£o mais recente do utilit√°rio (que n√£o est√° dispon√≠vel standalone).

    > üíÅ Se voc√™ n√£o conseguir se conectar usando `raspberrypi.local`, poder√° usar o endere√ßo IP do seu Pi. Consulte a [documenta√ß√£o do endere√ßo IP do Raspberry Pi](https://www.raspberrypi.org/documentation/remote-access/ip-address.md) para obter instru√ß√µes sobre v√°rias maneiras de obter o endere√ßo IP.

1. Digite a senha que voc√™ definiu nas op√ß√µes avan√ßadas do Raspberry Pi Imager

#### Configure o software no Pi

Assim que estiver conectado ao Pi, voc√™ precisa garantir que o sistema operacional esteja atualizado e instalar v√°rias bibliotecas e ferramentas que interagem com o hardware Grove.

##### Tarefa - configurar software no Pi

Configure o software Pi instalado e instale as bibliotecas Grove.

1. Na sess√£o `ssh`, execute o seguinte comando para atualizar e reinicie o Pi:

    ```sh
    sudo apt update && sudo apt full-upgrade --yes && sudo reboot
    ```

    O Pi ser√° atualizado e reiniciado. A sess√£o `ssh` terminar√° quando o Pi for reiniciado, ent√£o deixe-o por cerca de 30 segundos e reconecte.

1. A partir da sess√£o `ssh` reconectada, execute o seguinte comando para instalar todas as bibliotecas necess√°rias para o hardware Grove:

    ```sh
    curl -sL https://github.com/Seeed-Studio/grove.py/raw/master/install.sh | sudo bash -s -
    ```

    Um dos recursos poderosos do Python √© a capacidade de instalar [pacotes pip](https://pypi.org) - s√£o pacotes de c√≥digo escritos por outras pessoas e publicados na Internet. Voc√™ pode instalar um pacote pip em seu computador com um comando e, em seguida, usar esse pacote em seu c√≥digo. Este script de instala√ß√£o do Grove instalar√° os pacotes pip que voc√™ usar√° para trabalhar com o hardware Grove a partir do Python.

1. Reinicialize o Pi executando o seguinte comando:

    ```sh
    sudo reboot
    ```

    A sess√£o `ssh` terminar√° quando o Pi for reiniciado. N√£o h√° necessidade de reconectar.

#### Configure o VS Code para acesso remoto

Depois que o Pi estiver configurado, voc√™ pode se conectar a ele usando o Visual Studio Code (VS Code) a partir do seu computador - este √© um editor de texto para desenvolvedores gratuito que voc√™ usar√° para escrever o c√≥digo do seu dispositivo em Python.

##### Tarefa - configurar o VS Code para acesso remoto

Instale o software necess√°rio e conecte-se remotamente ao seu Pi.

1. Instale o VS Code em seu computador seguindo a [documenta√ß√£o do VS Code](https://code.visualstudio.com?WT.mc_id=academic-17441-jabenn)

1. Siga as instru√ß√µes em [VS Code Remote Development using SSH documentation](https://code.visualstudio.com/docs/remote/ssh?WT.mc_id=academic-17441-jabenn) para instalar os componentes necess√°rios

1. Seguindo as mesmas instru√ß√µes, conecte o VS Code ao Pi

1. Depois de conectado, siga as instru√ß√µes em [gerenciando extens√µes](https://code.visualstudio.com/docs/remote/ssh#_managing-extensions?WT.mc_id=academic-17441-jabenn) para instalar a [extens√£o Pylance](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-python.vscode-pylance) remotamente no Pi

## Hello World

√â tradicional, ao come√ßar com uma nova linguagem de programa√ß√£o ou tecnologia, criar um aplicativo 'Hello World' - um pequeno aplicativo que produz algo como o texto `"Hello World"` para mostrar que todas as ferramentas est√£o configuradas corretamente.

O aplicativo Hello World para o Pi garantir√° que voc√™ tenha o Python e o Visual Studio Code instalados corretamente.

Este aplicativo estar√° em uma pasta chamada `nightlight` e ser√° reutilizado com c√≥digo diferente em partes posteriores desta tarefa para construir o aplicativo nightlight.

### Tarefa - hello world

Crie o aplicativo Hello World.

1. Inicie o VS Code, diretamente no Pi ou em seu computador e conectado ao Pi usando a extens√£o Remote SSH

1. Inicie o Terminal do VS Code selecionando *Terminal -> Novo Terminal* ou pressionando `` CTRL+` ``. Ele ser√° aberto no diret√≥rio inicial dos usu√°rios `pi`.

1. Execute os seguintes comandos para criar um diret√≥rio para o seu c√≥digo e crie um arquivo Python chamado `app.py` dentro desse diret√≥rio:

    ```sh
    mkdir nightlight
    cd nightlight
    touch app.py
    ```

1. Abra esta pasta no VS Code selecionando *File -> Open...* e selecionando a pasta *nightlight* e, em seguida, selecione **OK**

    ![A caixa de di√°logo de abertura do VS Code mostrando a pasta nightlight](../../../../images/vscode-open-nightlight-remote.png)

1. Abra o arquivo `app.py` no VS Code explorer e adicione o seguinte c√≥digo:

    ```python
    print('Hello World!')
    ```

    A fun√ß√£o `print` imprime tudo o que √© passado para ela no console.

1. No Terminal do VS Code, execute o seguinte para executar seu aplicativo Python:

    ```sh
    python3 app.py
    ```

    > üíÅ Voc√™ precisa chamar explicitamente `python3` para executar este c√≥digo apenas no caso de ter o Python 2 instalado al√©m do Python 3 (a vers√£o mais recente). Se voc√™ tiver Python2 instalado, chamar `python` usar√° Python 2 em vez de Python 3

    A seguinte sa√≠da aparecer√° no terminal:

    ```output
    pi@raspberrypi:~/nightlight $ python3 app.py
    Hello World!
    ```

> üíÅ Voc√™ pode encontrar este c√≥digo na pasta [code/pi](code/pi).

üòÄ Seu programa 'Hello World' foi um sucesso!